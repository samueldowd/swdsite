!function(){var requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m=b&&b.split("/"),n=p.map,o=n&&n["*"]||{};if(a&&"."===a.charAt(0)&&b){for(m=m.slice(0,m.length-1),a=m.concat(a.split("/")),j=0;j<a.length;j+=1)if(l=a[j],"."===l)a.splice(j,1),j-=1;else if(".."===l){if(1===j&&(".."===a[2]||".."===a[0]))break;j>0&&(a.splice(j-1,2),j-=2)}a=a.join("/")}if((m||o)&&n){for(c=a.split("/"),j=c.length;j>0;j-=1){if(d=c.slice(0,j).join("/"),m)for(k=m.length;k>0;k-=1)if(e=n[m.slice(0,k).join("/")],e&&(e=e[d])){f=e,g=j;break}if(f)break;!h&&o&&o[d]&&(h=o[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function d(b,c){return function(){return k.apply(a,s.call(arguments,0).concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return"undefined"!=typeof b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[];if(i=i||c,"function"==typeof h){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),k=r.f,"require"===k)u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h.apply(n[c],u),c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){return"string"==typeof b?m[b]?m[b](c):g(l(b,c).f):(b.splice||(p=b,c.splice?(b=c,c=d,d=null):b=a),c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},15),k)},k.config=function(a){return p=a,k},define=function(a,c,d){c.splice||(d=c,c=[]),b(n,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("../libs/almond",function(){}),function(){define("jquery",[],function(){return jQuery})}.call(this),function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||"undefined"==typeof c)return 1;if(d>c||"undefined"==typeof d)return-1}return a.index-b.index}function c(a){return"\\"+qc[a]}function d(){}function e(a){return a instanceof e?a:new f(a)}function f(a,b){this.__chain__=!!b,this.__wrapped__=a}function g(a,b,c){if("function"!=typeof a)return Ob;if("undefined"==typeof b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Bb(a,b)}function h(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var i=a[e];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Uc(i)||q(i))){b||(i=h(i,b,c));var j=-1,k=i.length,l=g.length;for(g.length+=k;++j<k;)g[l++]=i[j]}else c||g.push(i)}return g}function i(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;var f=typeof a,g=typeof b;if(!(a!==a||a&&pc[f]||b&&pc[g]))return!1;if(null==a||null==b)return a===b;var h=Fc.call(a),j=Fc.call(b);if(h!=j)return!1;switch(h){case ic:case jc:return+a==+b;case lc:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case nc:case oc:return a==String(b)}var k=h==hc;if(!k){if(Cc.call(a,"__wrapped__ ")||b instanceof e)return i(a.__wrapped__||a,b.__wrapped__||b,c,d);if(h!=mc)return!1;var l=a.constructor,m=b.constructor;if(l!=m&&!(D(l)&&l instanceof l&&D(m)&&m instanceof m))return!1}c||(c=[]),d||(d=[]);for(var n=c.length;n--;)if(c[n]==a)return d[n]==b;var o=!0,p=0;if(c.push(a),d.push(b),k){if(p=b.length,o=p==a.length)for(;p--&&(o=i(a[p],b[p],c,d)););return o}return _c(b,function(b,e,f){return Cc.call(f,e)?(p++,!(o=Cc.call(a,e)&&i(a[e],b,c,d))&&bc):void 0}),o&&_c(a,function(a,b,c){return Cc.call(c,b)?!(o=--p>-1)&&bc:void 0}),o}function j(a,b,c){for(var d=-1,e=o(),f=a?a.length:0,g=[],h=c?[]:g;++d<f;){var i=a[d],j=c?c(i,d,a):i;(b?!d||h[h.length-1]!==j:e(h,j)<0)&&(c&&h.push(j),g.push(i))}return g}function k(a){return function(b,c,d){var e={};c=Eb(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else ad(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function l(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=8&b,k=16&b,n=32&b,o=a;if(!h&&!D(a))throw new TypeError;if(k&&!c.length&&(b&=-17,k=c=!1),n&&!d.length&&(b&=-33,n=d=!1),!g||h||i||n||!(Tc.fastBind||Hc&&k))q=function(){var p=arguments,r=g?e:this;if((i||k||n)&&(p=Qc.call(p),k&&Gc.apply(p,c),n&&Ec.apply(p,d),i&&p.length<f))return b|=16,l(a,j?b:-4&b,p,null,e,f);if(h&&(a=r[o]),this instanceof q){r=m(a.prototype);var s=a.apply(r,p);return E(s)?s:r}return a.apply(r,p)};else{if(k){var p=[e];Ec.apply(p,c)}var q=k?Hc.apply(a,p):Hc.call(a,e)}return q}function m(a){return E(a)?Ic(a):{}}function n(a){return Xc[a]}function o(){var b=(b=e.indexOf)===nb?a:b;return b}function p(a){return Yc[a]}function q(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Fc.call(a)==gc||!1}function r(a){if(!a)return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)a[e]=d[e]}return a}function s(a){return E(a)?Uc(a)?Qc.call(a):r({},a):a}function t(a){if(!a)return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)"undefined"==typeof a[e]&&(a[e]=d[e])}return a}function u(a){var b=[];return _c(a,function(a,c){D(a)&&b.push(c)}),b.sort()}function v(a,b){return a?Cc.call(a,b):!1}function w(a){for(var b=-1,c=Wc(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function x(a){return a===!0||a===!1||Fc.call(a)==ic}function y(a){return a?"object"==typeof a&&Fc.call(a)==jc:!1}function z(a){return a?1===a.nodeType:!1}function A(a){if(!a)return!0;if(Uc(a)||J(a))return!a.length;for(var b in a)if(Cc.call(a,b))return!1;return!0}function B(a,b){return i(a,b)}function C(a){return Kc(a)&&!Lc(parseFloat(a))}function D(a){return"function"==typeof a}function E(a){return!(!a||!pc[typeof a])}function F(a){return H(a)&&a!=+a}function G(a){return null===a}function H(a){return"number"==typeof a||Fc.call(a)==lc}function I(a){return a&&pc[typeof a]?Fc.call(a)==nc:!1}function J(a){return"string"==typeof a||Fc.call(a)==oc}function K(a){return"undefined"==typeof a}function L(a){var b=o(),c=h(arguments,!0,!1,1),d={};return _c(a,function(a,e){b(c,e)<0&&(d[e]=a)}),d}function M(a){for(var b=-1,c=Wc(a),d=c.length,e=Array(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function N(a){for(var b=-1,c=h(arguments,!0,!1,1),d=c.length,e={};++b<d;){var f=c[b];f in a&&(e[f]=a[f])}return e}function O(a){for(var b=-1,c=Wc(a),d=c.length,e=Array(d);++b<d;)e[b]=a[c[b]];return e}function P(a,b){var c=o(),d=a?a.length:0,e=!1;return d&&"number"==typeof d?e=c(a,b)>-1:ad(a,function(a){return(e=a===b)&&bc}),e}function Q(a,b,c){var d=!0;b=Eb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else ad(a,function(a,c,e){return!(d=!!b(a,c,e))&&bc});return d}function R(a,b,c){var d=[];b=Eb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else ad(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function S(a,b,c){b=Eb(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var f;return ad(a,function(a,c,d){return b(a,c,d)?(f=a,bc):void 0}),f}for(;++d<e;){var g=a[d];if(b(g,d,a))return g}}function T(a,b){return ib(a,b,!0)}function U(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:g(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==bc;);else ad(a,b)}function V(a,b){var c=a?a.length:0;if("number"==typeof c)for(;c--&&b(a[c],c,a)!==!1;);else{var d=Wc(a);c=d.length,ad(a,function(a,e,f){return e=d?d[--c]:--c,b(f[e],e,f)===!1&&bc})}}function W(a,b){var c=Qc.call(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=Array("number"==typeof f?f:0);return U(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function X(a,b,c){var d=-1,e=a?a.length:0;if(b=Eb(b,c,3),"number"==typeof e)for(var f=Array(e);++d<e;)f[d]=b(a[d],d,a);else f=[],ad(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function Y(a,b,c){var d=-1/0,e=d,f=-1,g=a?a.length:0;if(b||"number"!=typeof g)b=Eb(b,c,3),U(a,function(a,c,f){var g=b(a,c,f);g>d&&(d=g,e=a)});else for(;++f<g;){var h=a[f];h>e&&(e=h)}return e}function Z(a,b,c){var d=1/0,e=d,f=-1,g=a?a.length:0;if(b||"number"!=typeof g)b=Eb(b,c,3),U(a,function(a,c,f){var g=b(a,c,f);d>g&&(d=g,e=a)});else for(;++f<g;){var h=a[f];e>h&&(e=h)}return e}function $(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d)for(var e=Array(d);++c<d;)e[c]=a[c][b];return e||X(a,b)}function _(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=g(b,d,4);var f=-1,h=a.length;if("number"==typeof h)for(e&&(c=a[++f]);++f<h;)c=b(c,a[f],f,a);else ad(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function ab(a,b,c,d){var e=arguments.length<3;return b=g(b,d,4),V(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function bb(a,b,c){return b=Eb(b,c,3),R(a,function(a,c,d){return!b(a,c,d)})}function cb(a,b,c){var d=a?a.length:0;if("number"!=typeof d&&(a=O(a)),null==b||c)return a?a[Rb(d-1)]:_b;var e=db(a);return e.length=Oc(Nc(0,b),e.length),e}function db(a){var b=-1,c=a?a.length:0,d=Array("number"==typeof c?c:0);return U(a,function(a){var c=Rb(++b);d[b]=d[c],d[c]=a}),d}function eb(a){var b=a?a.length:0;return"number"==typeof b?b:Wc(a).length}function fb(a,b,c){var d;b=Eb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else ad(a,function(a,c,e){return(d=b(a,c,e))&&bc});return!!d}function gb(a,c,d){var e=-1,f=a?a.length:0,g=Array("number"==typeof f?f:0);for(c=Eb(c,d,3),U(a,function(a,b,d){g[++e]={criteria:c(a,b,d),index:e,value:a}}),f=g.length,g.sort(b);f--;)g[f]=g[f].value;return g}function hb(a){return Uc(a)?Qc.call(a):a&&"number"==typeof a.length?X(a):O(a)}function ib(a,b,c){return c&&A(b)?_b:(c?S:R)(a,b)}function jb(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function kb(a){for(var b=-1,c=o(),d=a.length,e=h(arguments,!0,!0,1),f=[];++b<d;){var g=a[b];c(e,g)<0&&f.push(g)}return f}function lb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=Eb(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:_b;return Qc.call(a,0,Oc(Nc(0,d),e))}function mb(a,b){return h(a,b)}function nb(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Nc(0,e+d):d||0}else if(d){var f=ub(b,c);return b[f]===c?f:-1}return a(b,c,d)}function ob(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=Eb(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return Qc.call(a,0,Oc(Nc(0,e-d),e))}function pb(a){var b=arguments,c=b.length,d=-1,e=o(),f=a?a.length:0,g=[];a:for(;++d<f;){var h=a[d];if(e(g,h)<0){for(var i=c;--i;)if(e(b[i],h)<0)continue a;g.push(h)}}return g}function qb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=Eb(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:_b;return Qc.call(a,Nc(0,e-d))}function rb(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Nc(0,d+c):Oc(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function sb(a,b,c){a=+a||0,c=+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Nc(0,Ac((b-a)/c)),f=Array(e);++d<e;)f[d]=a,a+=c;return f}function tb(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=Eb(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:Nc(0,b);return Qc.call(a,d)}function ub(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?Eb(c,d,1):Ob,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function vb(){return j(h(arguments,!0,!0))}function wb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=d&&d[b]===a?null:b,b=!1),null!=c&&(c=Eb(c,d,3)),j(a,b,c)}function xb(a){return kb(a,Qc.call(arguments,1))}function yb(){for(var a=-1,b=Y($(arguments,"length")),c=Array(0>b?0:b);++a<b;)c[a]=$(arguments,a);return c}function zb(a,b){for(var c=-1,d=a?a.length:0,e={};++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Ab(a,b){if(!D(b))throw new TypeError;return function(){return--a<1?b.apply(this,arguments):void 0}}function Bb(a,b){return arguments.length>2?l(a,17,Qc.call(arguments,2),null,b):l(a,1,null,null,b)}function Cb(a){for(var b=arguments.length>1?h(arguments,!0,!1,1):u(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=l(a[e],1,null,null,a)}return a}function Db(){for(var a=arguments,b=a.length;b--;)if(!D(a[b]))throw new TypeError;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Eb(a,b,c){var d=typeof a;if(null==a||"function"==d)return g(a,b,c);if("object"!=d)return function(b){return b[a]};var e=Wc(a);return function(b){for(var c=e.length,d=!1;c--&&(d=b[e[c]]===a[e[c]]););return d}}function Fb(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!D(a))throw new TypeError;if(b=Nc(0,b)||0,c===!0){var n=!0;m=!1}else E(c)&&(n=c.leading,l="maxWait"in c&&(Nc(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Dc()-g);if(0>=c){e&&clearTimeout(e);var l=j;e=i=j=_b,l&&(k=Dc(),f=a.apply(h,d))}else i=setTimeout(o,c)},p=function(){i&&clearTimeout(i),e=i=j=_b,(m||l!==b)&&(k=Dc(),f=a.apply(h,d))};return function(){if(d=arguments,g=Dc(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k);0>=q?(e&&(e=clearTimeout(e)),k=g,f=a.apply(h,d)):e||(e=setTimeout(p,q))}return i||b===l||(i=setTimeout(o,b)),c&&(f=a.apply(h,d)),f}}function Gb(a){if(!D(a))throw new TypeError;var b=Qc.call(arguments,1);return setTimeout(function(){a.apply(_b,b)},1)}function Hb(a,b){if(!D(a))throw new TypeError;var c=Qc.call(arguments,2);return setTimeout(function(){a.apply(_b,c)},b)}function Ib(a,b){var c={};return function(){var d=b?b.apply(this,arguments):cc+arguments[0];return Cc.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}function Jb(a){var b,c;if(!D(a))throw new TypeError;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Kb(a){return l(a,16,Qc.call(arguments,1))}function Lb(a,b,c){var d=!0,e=!0;if(!D(a))throw new TypeError;return c===!1?d=!1:E(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),c={},c.leading=d,c.maxWait=b,c.trailing=e,Fb(a,b,c)}function Mb(a,b){if(!D(b))throw new TypeError;return function(){var c=[a];return Ec.apply(c,arguments),b.apply(this,c)}}function Nb(a){return null==a?"":String(a).replace($c,n)}function Ob(a){return a}function Pb(a){U(u(a),function(b){var c=e[b]=a[b];e.prototype[b]=function(){var a=[this.__wrapped__];Ec.apply(a,arguments);var b=c.apply(e,a);return this.__chain__?new f(b,!0):b}})}function Qb(){return rc._=yc,this}function Rb(a,b){return null==a&&null==b&&(b=1),a=+a||0,null==b?(b=a,a=0):b=+b||0,a+Bc(Pc()*(b-a+1))}function Sb(a,b){if(a){var c=a[b];return D(c)?a[b]():c}}function Tb(a,b,d){var f=e,g=f.templateSettings;a||(a=""),d=t({},d,g);var h=0,i="__p += '",j=d.variable,k=RegExp((d.escape||ec).source+"|"+(d.interpolate||ec).source+"|"+(d.evaluate||ec).source+"|$","g");a.replace(k,function(b,d,e,f,g){return i+=a.slice(h,g).replace(fc,c),d&&(i+="' +\n_.escape("+d+") +\n'"),f&&(i+="';\n"+f+";\n__p += '"),e&&(i+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),h=g+b.length,b}),i+="';\n",j||(j="obj",i="with ("+j+" || {}) {\n"+i+"\n}\n"),i="function("+j+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+i+"return __p\n}";try{var l=Function("_","return "+i)(f)}catch(m){throw m.source=i,m}return b?l(b):(l.source=i,l)}function Ub(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=Array(a);for(b=g(b,c,1);++d<a;)e[d]=b(d);return e}function Vb(a){return null==a?"":String(a).replace(Zc,p)}function Wb(a){var b=++ac+"";return a?a+b:b}function Xb(a){return a=new f(a),a.__chain__=!0,a}function Yb(a,b){return b(a),a}function Zb(){return this.__chain__=!0,this}function $b(){return this.__wrapped__}var _b,ac=0,bc={},cc=+new Date+"",dc=/<%=([\s\S]+?)%>/g,ec=/($^)/,fc=/['\n\r\t\u2028\u2029\\]/g,gc="[object Arguments]",hc="[object Array]",ic="[object Boolean]",jc="[object Date]",kc="[object Function]",lc="[object Number]",mc="[object Object]",nc="[object RegExp]",oc="[object String]",pc={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},qc={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},rc=pc[typeof window]&&window||this,sc=pc[typeof exports]&&exports&&!exports.nodeType&&exports,tc=pc[typeof module]&&module&&!module.nodeType&&module,uc=tc&&tc.exports===sc&&sc,vc=pc[typeof global]&&global;!vc||vc.global!==vc&&vc.window!==vc||(rc=vc);var wc=[],xc=Object.prototype,yc=rc._,zc=RegExp("^"+String(xc.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Ac=Math.ceil,Bc=Math.floor,Cc=xc.hasOwnProperty,Dc=zc.test(Dc=Date.now)&&Dc||function(){return+new Date},Ec=wc.push,Fc=xc.toString,Gc=wc.unshift,Hc=zc.test(Hc=Fc.bind)&&Hc,Ic=zc.test(Ic=Object.create)&&Ic,Jc=zc.test(Jc=Array.isArray)&&Jc,Kc=rc.isFinite,Lc=rc.isNaN,Mc=zc.test(Mc=Object.keys)&&Mc,Nc=Math.max,Oc=Math.min,Pc=Math.random,Qc=wc.slice,Rc=zc.test(rc.attachEvent),Sc=Hc&&!/\n|true/.test(Hc+Rc);f.prototype=e.prototype;var Tc={};!function(){var a={0:1,length:1};Tc.fastBind=Hc&&!Sc,Tc.spliceObjects=(wc.splice.call(a,0,1),!a[0])}(1),e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:dc,variable:""},Ic||(m=function(a){if(E(a)){d.prototype=a;var b=new d;d.prototype=null}return b||{}}),q(arguments)||(q=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Cc.call(a,"callee")||!1});var Uc=Jc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Fc.call(a)==hc||!1},Vc=function(a){var b,c=a,d=[];if(!c)return d;if(!pc[typeof a])return d;for(b in c)Cc.call(c,b)&&d.push(b);return d},Wc=Mc?function(a){return E(a)?Mc(a):[]}:Vc,Xc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Yc=w(Xc),Zc=RegExp("("+Wc(Yc).join("|")+")","g"),$c=RegExp("["+Wc(Xc).join("")+"]","g"),_c=function(a,b){var c,d=a,e=d;if(!d)return e;if(!pc[typeof d])return e;for(c in d)if(b(d[c],c,a)===bc)return e;return e},ad=function(a,b){var c,d=a,e=d;if(!d)return e;if(!pc[typeof d])return e;for(c in d)if(Cc.call(d,c)&&b(d[c],c,a)===bc)return e;return e};D(/x/)&&(D=function(a){return"function"==typeof a&&Fc.call(a)==kc});var bd=k(function(a,b,c){Cc.call(a,c)?a[c]++:a[c]=1}),cd=k(function(a,b,c){(Cc.call(a,c)?a[c]:a[c]=[]).push(b)}),dd=k(function(a,b,c){a[c]=b});e.after=Ab,e.bind=Bb,e.bindAll=Cb,e.chain=Xb,e.compact=jb,e.compose=Db,e.countBy=bd,e.debounce=Fb,e.defaults=t,e.defer=Gb,e.delay=Hb,e.difference=kb,e.filter=R,e.flatten=mb,e.forEach=U,e.functions=u,e.groupBy=cd,e.indexBy=dd,e.initial=ob,e.intersection=pb,e.invert=w,e.invoke=W,e.keys=Wc,e.map=X,e.max=Y,e.memoize=Ib,e.min=Z,e.omit=L,e.once=Jb,e.pairs=M,e.partial=Kb,e.pick=N,e.pluck=$,e.range=sb,e.reject=bb,e.rest=tb,e.shuffle=db,e.sortBy=gb,e.tap=Yb,e.throttle=Lb,e.times=Ub,e.toArray=hb,e.union=vb,e.uniq=wb,e.values=O,e.where=ib,e.without=xb,e.wrap=Mb,e.zip=yb,e.collect=X,e.drop=tb,e.each=U,e.extend=r,e.methods=u,e.object=zb,e.select=R,e.tail=tb,e.unique=wb,e.clone=s,e.contains=P,e.escape=Nb,e.every=Q,e.find=S,e.has=v,e.identity=Ob,e.indexOf=nb,e.isArguments=q,e.isArray=Uc,e.isBoolean=x,e.isDate=y,e.isElement=z,e.isEmpty=A,e.isEqual=B,e.isFinite=C,e.isFunction=D,e.isNaN=F,e.isNull=G,e.isNumber=H,e.isObject=E,e.isRegExp=I,e.isString=J,e.isUndefined=K,e.lastIndexOf=rb,e.mixin=Pb,e.noConflict=Qb,e.random=Rb,e.reduce=_,e.reduceRight=ab,e.result=Sb,e.size=eb,e.some=fb,e.sortedIndex=ub,e.template=Tb,e.unescape=Vb,e.uniqueId=Wb,e.all=Q,e.any=fb,e.detect=S,e.findWhere=T,e.foldl=_,e.foldr=ab,e.include=P,e.inject=_,e.first=lb,e.last=qb,e.sample=cb,e.take=lb,e.head=lb,Pb(e),e.VERSION="2.2.1",e.prototype.chain=Zb,e.prototype.value=$b,U(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=wc[a];e.prototype[a]=function(){var a=this.__wrapped__;return b.apply(a,arguments),Tc.spliceObjects||0!==a.length||delete a[0],this}}),U(["concat","join","slice"],function(a){var b=wc[a];e.prototype[a]=function(){var a=this.__wrapped__,c=b.apply(a,arguments);return this.__chain__&&(c=new f(c),c.__chain__=!0),c}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(rc._=e,define("underscore",[],function(){return e})):sc&&tc?uc?(tc.exports=e)._=e:sc._=e:rc._=e}.call(this),function(a,b){"undefined"!=typeof exports?b(a,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)}):a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=f.push,h=f.slice,i=f.splice;b.VERSION="1.0.0",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var j=b.Events={on:function(a,b,c){if(!l(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!l(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,j,k,m;if(!this._events||!l(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events={},this;for(h=a?[a]:c.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(k=0,m=g.length;m>k;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!l(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&m(c,b),d&&m(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},k=/\s+/,l=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(k.test(c)){for(var f=c.split(k),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},m=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},n={listenTo:"on",listenToOnce:"once"};c.each(n,function(a,b){j[b]=function(b,d,e){var f=this._listeners||(this._listeners={}),g=b._listenerId||(b._listenerId=c.uniqueId("l"));return f[g]=b,"object"==typeof d&&(e=this),b[a](d,e,this),this}}),j.bind=j.on,j.unbind=j.off,c.extend(b,j);var o=b.Model=function(a,b){var d,e=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},c.extend(this,c.pick(b,p)),b.parse&&(e=this.parse(e,b)||{}),(d=c.result(this,"defaults"))&&(e=c.defaults({},e,d)),this.set(e,b),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];c.extend(o.prototype,j,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=!0);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),b.trigger("sync",b,c,a),void 0):!1},M(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,!(!e||d&&d.wait||this.set(e,d)))return!1;if(d=c.extend({validate:!0},d),!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),i.trigger("sync",i,a,d),void 0)},M(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;M(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||L();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b||{},{validationError:d})),!1):!0}});var q=["keys","values","pairs","invert","pick","omit"];c.each(q,function(a){o.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var r=b.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},s={add:!0,remove:!0,merge:!0},t={add:!0,merge:!1,remove:!1};c.extend(r.prototype,j,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.defaults(b||{},t))},remove:function(a,b){a=c.isArray(a)?a.slice():[a],b||(b={});var d,e,f,g;for(d=0,e=a.length;e>d;d++)g=this.get(a[d]),g&&(delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g));return this},set:function(a,b){b=c.defaults(b||{},s),b.parse&&(a=this.parse(a,b)),c.isArray(a)||(a=a?[a]:[]);var d,e,f,h,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=c.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(d=0,e=a.length;e>d;d++)(f=this._prepareModel(a[d],b))&&((h=this.get(f))?(b.remove&&(p[h.cid]=!0),b.merge&&(h.set(f.attributes,b),l&&!j&&h.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(d=0,e=this.length;e>d;++d)p[(f=this.models[d]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?i.apply(this.models,[k,0].concat(n)):g.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(d=0,e=n.length;e>d;d++)(f=n[d]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d]);return b.previousModels=this.models,this._reset(),this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,d){b||(b=this.comparator);var e=c.isFunction(b)?b:function(a){return a.get(b)};return c.sortedIndex(this.models,a,e,d)},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},M(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof o)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var u=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(u,function(a){r.prototype[a]=function(){var b=h.call(arguments);
return b.unshift(this.models),c[a].apply(c,b)}});var v=["groupBy","countBy","sortBy"];c.each(v,function(a){r.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var w=b.View=function(a){this.cid=c.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,y=["model","collection","el","id","attributes","className","tagName","events"];c.extend(w.prototype,j,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(x),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=c.extend({},c.result(this,"options"),a)),c.extend(this,c.pick(a,y)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=z[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||L()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"!==g.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var z={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var A=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},B=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,D=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(A.prototype,j,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);e&&e.apply(f,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(E,"\\$&").replace(B,"(?:$1)?").replace(C,function(a,b){return b?a:"([^/]+)"}).replace(D,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a){return a?decodeURIComponent(a):null})}});var F=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},G=/^[#\/]|\s+$/g,H=/^\/+|\/+$/g,I=/msie [\w.]+/,J=/\/$/;F.started=!1,c.extend(F.prototype,j,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(J,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(G,"")},start:function(a){if(F.started)throw new Error("Backbone.history has already been started");F.started=!0,this.options=c.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=I.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);this.root=("/"+this.root+"/").replace(H,"/"),f&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(d)),this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var g=this.location,h=g.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!h?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=this.getHash().replace(G,""),this.history.replaceState({},document.title,this.root+this.fragment+g.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),F.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),d=c.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return d},navigate:function(a,b){if(!F.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new F;var K=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};o.extend=r.extend=A.extend=w.extend=F.extend=K;var L=function(){throw new Error('A "url" property or function must be specified')},M=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),define("templates",[],function(){function nulls(a){return null!=a}var jade={};Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)}),Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),jade.merge=function(a,b){var c=a["class"],d=b["class"];(c||d)&&(c=c||[],d=d||[],Array.isArray(c)||(c=[c]),Array.isArray(d)||(d=[d]),c=c.filter(nulls),d=d.filter(nulls),a["class"]=c.concat(d).join(" "));for(var e in b)"class"!=e&&(a[e]=b[e]);return a},jade.attrs=function(a,b){var c=[],d=a.terse;delete a.terse;var e=Object.keys(a),f=e.length;if(f){c.push("");for(var g=0;f>g;++g){var h=e[g],i=a[h];"boolean"==typeof i||null==i?i&&(d?c.push(h):c.push(h+'="'+h+'"')):0==h.indexOf("data")&&"string"!=typeof i?c.push(h+"='"+JSON.stringify(i)+"'"):"class"==h&&Array.isArray(i)?c.push(h+'="'+jade.escape(i.join(" "))+'"'):b&&b[h]?c.push(h+'="'+jade.escape(i)+'"'):c.push(h+'="'+i+'"')}}return c.join(" ")},jade.escape=function(a){return String(a).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jade.rethrow=function(a,b,c){if(!b)throw a;var d=3,e=require("fs").readFileSync(b,"utf8"),f=e.split("\n"),g=Math.max(c-d,0),h=Math.min(f.length,c+d),d=f.slice(g,h).map(function(a,b){var d=b+g+1;return(d==c?"  > ":"    ")+d+"| "+a}).join("\n");throw a.path=b,a.message=(b||"Jade")+":"+c+"\n"+d+"\n\n"+a.message,a};var exports=exports||{};return exports.Templates=exports.Templates||{},exports.Templates.account=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="container account-page"><div class="row"><div class="span8"><h2 class="icon-account">Your Account</h2></div></div><div class="row"><div class="span5"><h3>Change Email or Password</h3><iframe src="/accounts/profile/" scrolling="no" frameborder="0"></iframe><h3>Delete Account</h3><p>If you choose you delete your account, you will loose all the icon fonts associated</p><a id="delete-account" href="/accounts/delete/" class="btn btn-danger">Delete your account</a></div><div class="span5 offset2"><h3>Leave Fontastic</h3><a href="/accounts/logout/" class="btn">Logout</a></div></div></div>');return buf.join("")},exports.Templates.admin_library=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div draggable="true" class="library-header"><div class="drag-handle"></div><a'),buf.push(attrs({href:"#","class":"library-name "+(locals.is_closed?"closed":"")},{"class":!0,href:!0})),buf.push(">"+escape(null==(interp=name)?"":interp)+'</a><div class="icon-counter"></div><div class="found-icons-counter"></div>'),1==locals.type?buf.push('<div class="library-type">Public</div>'):2==locals.type&&buf.push('<div class="library-type">Premium</div>'),buf.push('<div class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle icon-menu"></a><ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu"><li><a href="#" class="add-icons">Add Icons</a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-input"/></div></li><li><a href="#" class="edit">Change name</a></li>'),locals.id&&(buf.push("<li><a"),buf.push(attrs({href:"/admin/fontastic/library/"+id+"/",target:"blank"},{href:!0,target:!0})),buf.push(">Edit Collection</a></li>")),buf.push('<li><a href="#" class="delete-library">Delete Collection</a></li></ul></div>'),(locals.author_name||locals.license_name)&&(buf.push('<div class="library-info">'),locals.author_name&&(locals.author_url?(buf.push("<a"),buf.push(attrs({href:""+author_url,target:"blank"},{href:!0,target:!0})),buf.push(">by "+escape(null==(interp=author_name)?"":interp)+"</a>")):buf.push("<span>by "+escape(null==(interp=author_name)?"":interp)+"</span>")),locals.license_name&&(locals.license_url?(buf.push("<a"),buf.push(attrs({href:""+license_url,target:"blank","data-placement":"bottom",title:license_name,"class":"license-name"},{href:!0,target:!0,"data-placement":!0,title:!0})),buf.push(">License</a>")):(buf.push("<span"),buf.push(attrs({"data-placement":"bottom",title:license_name,"class":"license-name"},{"data-placement":!0,title:!0})),buf.push(">License</span>"))),buf.push("</div>")),buf.push("</div><div"),buf.push(attrs({"class":"icons-wrapper "+(locals.is_closed?"closed":"")},{"class":!0})),buf.push('><ul class="icons"></ul>'),function(){if("number"==typeof icon_groups.length)for(var a=0,b=icon_groups.length;b>a;a++){var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group-uri":c.resource_uri,"class":"icon-group"},{"data-group-uri":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div><a href="#" class="icon-import add-icons-to-group"></a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-to-group-input"/></div></div><ul class="icons"></ul></div>')}else{var b=0;for(var a in icon_groups){b++;var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group-uri":c.resource_uri,"class":"icon-group"},{"data-group-uri":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div><a href="#" class="icon-import add-icons-to-group"></a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-to-group-input"/></div></div><ul class="icons"></ul></div>')}}}.call(this),buf.push("</div>")}return buf.join("")},exports.Templates.admin_library_form=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="modal-header"><h4>Edit collection</h4></div><div class="modal-body"><div class="control-group"><label>Collection Name<div class="controls"><input'),buf.push(attrs({name:"name",type:"text",value:""+name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>Authour Name<div class="controls"><input'),buf.push(attrs({name:"author_name",type:"text",value:""+author_name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>Authour URL<div class="controls"><input'),buf.push(attrs({name:"author_url",type:"text",value:""+author_url},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>License Name<div class="controls"><input'),buf.push(attrs({name:"license_name",type:"text",value:""+license_name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>License URL<div class="controls"><input'),buf.push(attrs({name:"license_url",type:"text",value:""+license_url},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Submit</button><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>');return buf.join("")},exports.Templates.alert=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;header&&buf.push('<div class="modal-header"><h4>'+escape(null==(interp=header)?"":interp)+"</h4></div>"),buf.push('<div class="modal-body"><p>'+escape(null==(interp=body)?"":interp)+'</p></div><div class="modal-footer"><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Ok</a></div>')}return buf.join("")},exports.Templates.css_code=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('/* Just click to select the code */\n \n@charset "UTF-8";\n \n@font-face {\n  font-family: "'+escape(null==(interp=name)?"":interp)+'";\n  src:url("fonts/'+escape(null==(interp=name)?"":interp)+'.eot");\n  src:url("fonts/'+escape(null==(interp=name)?"":interp)+'.eot?#iefix") format("embedded-opentype"),\n    url("fonts/'+escape(null==(interp=name)?"":interp)+'.ttf") format("truetype"),\n    url("fonts/'+escape(null==(interp=name)?"":interp)+".svg#"+escape(null==(interp=name)?"":interp)+'") format("svg"),\n    url("fonts/'+escape(null==(interp=name)?"":interp)+'.woff") format("woff");\n  font-weight: normal;\n  font-style: normal;\n}\n \n[data-icon]:before {\n  font-family: "'+escape(null==(interp=name)?"":interp)+'" !important;\n  content: attr(data-icon);\n  font-style: normal !important;\n  font-weight: normal !important;\n  font-variant: normal !important;\n  text-transform: none !important;\n  speak: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n \n[class^="'+escape(null==(interp=css_class_prefix)?"":interp)+'-"]:before,\n[class*=" '+escape(null==(interp=css_class_prefix)?"":interp)+'-"]:before {\n  font-family: "'+escape(null==(interp=name)?"":interp)+'" !important;\n  font-style: normal !important;\n  font-weight: normal !important;\n  font-variant: normal !important;\n  text-transform: none !important;\n  speak: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}'),function(){if("number"==typeof glyphs.length)for(var a=0,b=glyphs.length;b>a;a++){var c=glyphs[a];buf.push(" \n \n."+escape(null==(interp=css_class_prefix)?"":interp)+"-"+escape(null==(interp=c.css_class)?"":interp)+":before {\n "),'"'!=c.code?buf.push('  content: "'+escape(null==(interp=c.code)?"":interp)+'";'):buf.push("  content: '\"';"),buf.push(" \n}")}else{var b=0;for(var a in glyphs){b++;var c=glyphs[a];buf.push(" \n \n."+escape(null==(interp=css_class_prefix)?"":interp)+"-"+escape(null==(interp=c.css_class)?"":interp)+":before {\n "),'"'!=c.code?buf.push('  content: "'+escape(null==(interp=c.code)?"":interp)+'";'):buf.push("  content: '\"';"),buf.push(" \n}")}}}.call(this)}return buf.join("")},exports.Templates.css_code_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{});return buf.join("")},exports.Templates.customize_layout=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="title-bar">Character mapping<div class="reset-characters"><div class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle">Reset Characters<b class="caret"></b></a><ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu"><li><a id="latin" href="#" class="reset-code-mapping">Basic Latin</a></li><li><a id="pua" href="#" class="reset-code-mapping">PUA</a></li></ul></div></div></div><div class="glyphs-region"></div><div class="title-bar">CSS Class Mapping</div><div class="glyphs-css-region"></div>');return buf.join("")},exports.Templates.dialog=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;header&&buf.push('<div class="modal-header"><h4>'+escape(null==(interp=header)?"":interp)+"</h4></div>"),buf.push('<div class="modal-body"><p>'+escape(null==(interp=body)?"":interp)+'</p></div><div class="modal-footer"><a href="#" class="submit btn btn-primary">'+escape(null==(interp=submitText)?"":interp)+'</a><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>')}return buf.join("")},exports.Templates.download=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="download-button-region"></div><div class="how-to-wrap"><h4>How to install your Font?</h4><ul class="tab-pills"><li><a href="#" data-mapping-method="character-mapping">Method 1 - Character mapping</a></li><li><a href="#" data-mapping-method="css-mapping">Method 2 - CSS Class mapping</a></li></ul><div class="steps"><div class="row"><div class="tip span10"><div class="number">1</div>Download the font and unzip it:<img src="/static/images/download/1.png"/></div></div><div class="row"><div class="tip span10"><div class="number">2</div>Copy the "fonts" folder into your website project:<img src="/static/images/download/2.png"/></div></div><div class="row"><div class="tip span10"><div class="number">3</div>Copy this CSS Code to your website stylesheet:<br/><pre></pre><br/>Or add the CSS file “styles.css” to your project, and link to it from your HTML page.<br/></div></div><div class="row for-character-mapping"><div class="tip span10"><div class="number">4</div>Insert the "data-icon" attribute into any HTML tag to add the icon:<br/><br/><img src="/static/images/download/4.png"/></div></div><div class="row for-css-mapping"><div class="tip span10"><div class="number">4</div>Insert the icon class name into any HTML tag to add the icon. The default CSS class prefix is \'icon-\':<br/><br/><img src="/static/images/download/5.png"/></div></div></div></div><div class="reference-wrap"><h4>Icons reference</h4><br/><p class="tip for-character-mapping large">Copy/paste the data-icon attribute into your HTML to insert the icon.</p><p class="tip for-css-mapping large">Copy/paste the CSS Class name into your HTML to insert the icon.</p><div class="icons-reference-wrap"></div></div>');return buf.join("")},exports.Templates.download_button=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="download-header"><p class="for-font-ready large download-intro">Your font is ready to download and to install on your website!</p><p class="for-font-not-ready large download-intro">Please select at least one icon to download your font.</p><a href="#" class="download-button btn btn-large btn-primary icon-download"><div class="for-ready">Download</div><div class="for-processing">Processing...</div><div class="counter">0</div></a></div>');return buf.join("")},exports.Templates.download_tab=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push("<a"),buf.push(attrs({href:"#download/"+uuid,"class":"tab"},{href:!0})),buf.push('>Download<span class="counter">0</span></a>');return buf.join("")},exports.Templates.editable=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div title="Click to edit" class="editable-value">'+escape(null==(interp=value)?"":interp)+'</div><form class="editable-form"><input'),buf.push(attrs({type:"text",placeholder:placeholder,value:value,required:!0},{type:!0,placeholder:!0,value:!0,required:!0})),buf.push('/><button type="submit" class="btn btn-primary">Submit</button><button class="cancel btn">Cancel</button></form>')}return buf.join("")},exports.Templates.empty_view=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push(""+escape(null==(interp=message)?"":interp))}return buf.join("")},exports.Templates.font_form=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="modal-header"><h4>Font settings</h4></div><div class="modal-body"><div class="control-group"><label>Font Name<div class="controls"><input'),buf.push(attrs({name:"full_name",type:"text",value:""+full_name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>CSS Class Prefix<div class="controls"><input'),buf.push(attrs({name:"css_class_prefix",type:"text",value:""+css_class_prefix},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div></div><div class="modal-body delete-font-wrap"><label>Click to delete this font</label><a href="#" data-dismiss="modal" class="btn btn-danger delete-font">Delete this font</a></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Save</button><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>');return buf.join("")},exports.Templates.font_layout=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="fontbar-region"></div><div class="navbar-region"></div><div class="container"><div class="content"></div></div>');return buf.join("")},exports.Templates.fontbar=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="container"><div class="row fontbar"><div class="span4"><div class="select-font-wrap"></div></div><div class="span8"><ul class="nav"><li><a id="reset-current-font" href="#">Deselect Icons</a></li><li><a href="#" class="edit-font">Font settings</a></li></ul></div></div></div>');return buf.join("")},exports.Templates.glyph=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<a href="#" title="Delete glyph" class="delete"></a><div class="svg-wrap">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push('</div><div class="input-wrap"><input'),buf.push(attrs({type:"text",value:codeInputValue},{type:!0,value:!0})),buf.push("/></div>")}return buf.join("")},exports.Templates.glyph_css=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="svg-wrap">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push('</div><div class="input-wrap"><input'),buf.push(attrs({type:"text",value:css_class},{type:!0,value:!0})),buf.push("/></div>")}return buf.join("")},exports.Templates.icon=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push("<div"),buf.push(attrs({"data-id":id,"class":"icon"},{"data-id":!0})),buf.push(">");var __val__=svg;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")},exports.Templates.libraries=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="filter-info-wrap"><div class="filter-info"></div><a href="#" data-placement="bottom" title="Cancel search" class="filter-reset icon-remove"></a></div><ul class="libraries"></ul><a href="#collections" class="large underline gray">+ Add More Icons</a><br/><br/><div class="import-icons-block"><p>Drag SVG Icons/Fonts Here to Import Them</p></div><div class="file-input-wrap"><input type="file" multiple="multiple" class="import-icons-input"/></div>');return buf.join("")},exports.Templates.libraries_management=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="container"><h2 class="icon-categories">Icons Collections</h2><div class="introduction"> \nActivate or deactivate the icons collections available in Fontastic </div><a href="#" data-placement="bottom" title="SVG icons or fonts only" class="btn icon-add import-icons">New collection</a><div class="file-input-wrap"><input type="file" multiple="multiple" class="import-icons-input"/></div><ul class="libraries-to-manage"></ul></div>');return buf.join("")},exports.Templates.libraries_management_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;isPremium&&buf.push('<div class="premium-paid-ribbon"></div>'),buf.push('<div class="thumbnail">'),thumbnail?(buf.push("<img"),buf.push(attrs({src:thumbnail},{src:!0})),buf.push("/>")):buf.push('<div class="placeholder"></div>'),buf.push("</div>"),locals.has_attachment&&(buf.push('<div class="download-wrap"><a'),buf.push(attrs({href:"/download/resources/"+uuid,"class":"icon-download"},{href:!0})),buf.push(">Download Sources</a></div>")),buf.push('<div class="footer"><ul class="library-info"><li><div class="library-name">'+escape(null==(interp=name)?"":interp)+'</div></li><li><div class="icon-counter">0</div></li></ul><a href="#" class="activate btn btn-primary">Activate</a><a href="#" class="deactivate btn">Deactivate</a></div>')}return buf.join("")},exports.Templates.library=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="library-header"><a'),buf.push(attrs({href:"#","class":"library-name "+(locals.is_closed?"closed":"")},{"class":!0,href:!0})),buf.push(">"+escape(null==(interp=name)?"":interp)+'</a><div class="icon-counter"></div><div class="found-icons-counter"></div>'),2!=locals.type||locals.trial||buf.push('<div class="library-type">Premium</div>'),locals.trial&&buf.push('<div class="trial-info">Trial will expire <span class="trial-expiration"></span></div>'),locals.discount_percent&&(buf.push("<a"),buf.push(attrs({href:"#collections/"+uuid,"class":"discount-link"},{href:!0})),buf.push(">Buy now "+escape(null==(interp=discount_percent)?"":interp)+"% off</a>")),(locals.author_name||locals.license_name)&&(buf.push('<div class="library-info">'),locals.author_name&&(locals.author_url?(buf.push("<a"),buf.push(attrs({href:""+author_url,target:"blank"},{href:!0,target:!0})),buf.push(">by "+escape(null==(interp=author_name)?"":interp)+"</a>")):buf.push("<span>by "+escape(null==(interp=author_name)?"":interp)+"</span>")),locals.license_name&&(locals.license_url?(buf.push("<a"),buf.push(attrs({href:""+license_url,target:"blank","data-placement":"bottom",title:license_name,"class":"license-name"},{href:!0,target:!0,"data-placement":!0,title:!0})),buf.push(">License</a>")):(buf.push("<span"),buf.push(attrs({"data-placement":"bottom",title:license_name,"class":"license-name"},{"data-placement":!0,title:!0})),buf.push(">License</span>"))),buf.push("</div>")),buf.push("</div><div"),buf.push(attrs({"class":"icons-wrapper "+(locals.is_closed?"closed":"")},{"class":!0})),buf.push('><ul class="icons"></ul>'),function(){if("number"==typeof icon_groups.length)for(var a=0,b=icon_groups.length;b>a;a++){var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group-uri":c.resource_uri,"class":"icon-group"},{"data-group-uri":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div></div><ul class="icons"></ul></div>')}else{var b=0;for(var a in icon_groups){b++;var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group-uri":c.resource_uri,"class":"icon-group"},{"data-group-uri":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div></div><ul class="icons"></ul></div>')}}}.call(this),buf.push("</div>")}return buf.join("")},exports.Templates.library_form=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;
var buf=[];with(locals||{})buf.push('<div class="modal-header"><h4>Change collection name</h4></div><div class="modal-body"><div class="control-group"><label>Collection Name<div class="controls"><input'),buf.push(attrs({name:"name",type:"text",value:""+name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Save</button><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>');return buf.join("")},exports.Templates.library_preview=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container library-preview-page"><div class="row"><div class="span6"><h1>'+escape(null==(interp=locals.name)?"":interp)+' </h1><p class="collection-infos">Creator:  '),locals.author_url?(buf.push("<a"),buf.push(attrs({href:""+locals.author_url,target:"blank"},{href:!0,target:!0})),buf.push(">"+escape(null==(interp=locals.author_name)?"":interp)+"</a>")):buf.push(""+escape(null==(interp=locals.author_name)?"":interp)),buf.push("&nbsp; &nbsp; |  &nbsp; &nbsp; License: "),locals.license_url?(buf.push("<a"),buf.push(attrs({href:""+locals.license_url,target:"blank"},{href:!0,target:!0})),buf.push(">"+escape(null==(interp=locals.license_name)?"":interp)+"</a>")):buf.push(""+escape(null==(interp=locals.license_name)?"":interp)),buf.push('</p><div class="description">');var __val__=locals.description;if(buf.push(null==__val__?"":__val__),buf.push('</div></div><div class="span5 offset1 activation-block">'),locals.discount_percent&&buf.push('<div class="discount-price"><p class="large"><strong>Activate '+escape(null==(interp=icon_counter)?"":interp)+" Icons </strong>- $"+escape(null==(interp=locals.discountPrice)?"":interp)+'  </p><p> <b class="red">'+escape(null==(interp=locals.discount_percent)?"":interp)+'% off </b>the original price: <span class="strike">  $'+escape(null==(interp=price)?"":interp)+'</span></p><p class="small">Price increase imminent! <br/>Offer expires in <span class="discount-expiration red"></span></p></div>'),buf.push('<div class="regular-price">'),locals.attachment_price){var attachmentPrice=price+attachment_price;buf.push('<div class="price-selection"><label class="radio checked"><input type="radio" name="option" value="default" checked="checked"/>Activate '+escape(null==(interp=icon_counter)?"":interp)+"  icons - $"+escape(null==(interp=price)?"":interp)+'</label><label class="radio"><input type="radio" name="option" value="attachment"/>Activate '+escape(null==(interp=icon_counter)?"":interp)+" icons +  Vector Sources\n - $"+escape(null==(interp=attachmentPrice)?"":interp)+'<br/><p class="small">(After payment, you can also download the Vector sources to design in Illustrator, Photoshop, Sketch... )</p></label></div>')}else buf.push('<p class="large"></p><strong>Activate '+escape(null==(interp=icon_counter)?"":interp)+" Icons </strong>- $"+escape(null==(interp=price)?"":interp)+"<p></p>");buf.push("</div><a"),buf.push(attrs({href:"/payments/payment/"+uuid+"/","class":"buy btn btn-primary"},{href:!0})),buf.push('> \nAdd to Cart </a><p class="collection-btn-infos"><strong>Instant activation after purchase</strong></p><p class="collection-btn-infos"><img src="/static/images/paypal.png"/></p></div></div><div class="row"><div class="span12"><div class="preview"><br/><img'),buf.push(attrs({src:locals.preview},{src:!0})),buf.push("/><br/><br/></div></div></div></div>")}return buf.join("")},exports.Templates.names_icon=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="svg-wrap">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push('</div><div class="input-wrap"><input'),buf.push(attrs({type:"text",value:name},{type:!0,value:!0})),buf.push("/></div>")}return buf.join("")},exports.Templates.names_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<h2>"+escape(null==(interp=name)?"":interp)+'</h2><ul class="icons glyphs-css"></ul>')}return buf.join("")},exports.Templates.navbar=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="container"><div class="row navbar"><div class="span12"><ul class="nav"><li><a'),buf.push(attrs({href:"#select/"+uuid,"class":"tab"},{href:!0})),buf.push(">Select</a></li><li><a"),buf.push(attrs({href:"#customize/"+uuid,"class":"tab"},{href:!0})),buf.push('>Customize</a></li><li><div class="download-tab-region"></div></li><li class="filter-wrap"><div class="filter"><input type="text" placeholder="Search icons..."/><a href="#" class="filter-reset icon-remove"></a></div></li></ul></div></div></div>');return buf.join("")},exports.Templates.not_found=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="container"><h1>Oops! Not found.</h1><p>Sorry, but the page you were trying to view does not exist.</p></div>');return buf.join("")},exports.Templates.personal_icon=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<a href="#" data-placement="bottom" title="Update icon" class="update-icon icon-import"></a><div class="file-input-wrap"><input type="file" multiple="multiple" class="update-icon-input"/></div><a href="#" title="Delete icon" class="delete"></a><div'),buf.push(attrs({"data-id":id,"class":"icon"},{"data-id":!0})),buf.push(">");var __val__=svg;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")},exports.Templates.personal_library=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="library-header"><a'),buf.push(attrs({href:"#","class":"library-name "+(locals.is_closed?"closed":"")},{"class":!0,href:!0})),buf.push(">"+escape(null==(interp=name)?"":interp)+'</a><div class="icon-counter"></div><div class="found-icons-counter"></div><div class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle icon-menu"></a><ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu"><li><a href="#" class="add-icons">Add Icons</a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-input"/></div></li><li><a href="#" class="edit">Change name</a></li><li><a href="#" class="delete-library">Delete Collection</a></li></ul></div></div><div'),buf.push(attrs({"class":"icons-wrapper "+(locals.is_closed?"closed":"")},{"class":!0})),buf.push('><ul class="icons"></ul>'),function(){if("number"==typeof icon_groups.length)for(var a=0,b=icon_groups.length;b>a;a++){var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group":c.resource_uri,"class":"icon-group"},{"data-group":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div><a href="#" class="icon-import add-icons-to-group"></a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-to-group-input"/></div></div><ul class="icons"></ul></div>')}else{var b=0;for(var a in icon_groups){b++;var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group":c.resource_uri,"class":"icon-group"},{"data-group":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div><a href="#" class="icon-import add-icons-to-group"></a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-to-group-input"/></div></div><ul class="icons"></ul></div>')}}}.call(this),buf.push("</div>")}return buf.join("")},exports.Templates.premium_library=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="premium-ribbon"></div><div class="thumbnail"><a'),buf.push(attrs({href:"#collections/"+uuid},{href:!0})),buf.push("><img"),buf.push(attrs({src:thumbnail},{src:!0})),buf.push('/></a></div><div class="footer"><ul class="library-info"><li><div class="library-name">'+escape(null==(interp=name)?"":interp)+'</div></li><li><div class="icon-counter">'+escape(null==(interp=icon_counter)?"":interp)+'</div><span class="discount-price"><b><div class="price">'+escape(null==(interp=locals.discountPrice)?"":interp)+' </div></b><div class="price"><s>'+escape(null==(interp=price)?"":interp)+'</s></div></span><span class="regular-price"><div class="price">'+escape(null==(interp=price)?"":interp)+"</div></span></li></ul><a"),buf.push(attrs({href:"#collections/"+uuid,"class":"buy btn btn-primary"},{href:!0})),buf.push('>Activate</a><a href="#" class="deactivate btn btn-danger">Deactivate</a></div>')}return buf.join("")},exports.Templates.reference=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<ul class="icons-reference"></ul>');return buf.join("")},exports.Templates.reference_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="icon">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push("</div><input"),buf.push(attrs({type:"text",readonly:"readonly",value:""+dataIcon,"class":"for-character-mapping"},{type:!0,readonly:!0,value:!0})),buf.push("/><input"),buf.push(attrs({type:"text",readonly:"readonly",value:'class="'+css_class_prefix+"-"+css_class+'"',"class":"for-css-mapping"},{type:!0,readonly:!0,value:!0})),buf.push("/>")}return buf.join("")},exports.Templates.select_font=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle">'+escape(null==(interp=full_name)?"":interp)+'</a><ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu"></ul></div>')}return buf.join("")},exports.Templates.select_font_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<a"),buf.push(attrs({href:"#select/"+uuid},{href:!0})),buf.push(">"+escape(null==(interp=full_name)?"":interp)+"</a>")}return buf.join("")},exports.Templates.tags_icon=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="svg-wrap">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push('</div><div class="input-wrap"><input'),buf.push(attrs({type:"text",value:tags},{type:!0,value:!0})),buf.push("/></div>")}return buf.join("")},exports.Templates.tags_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<h2>"+escape(null==(interp=name)?"":interp)+'</h2><ul class="icons glyphs-css"></ul>')}return buf.join("")},exports.Templates.topbar=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container"><div class="row topbar"><div class="span2"><a href="/app/#" class="logo"></a></div><div class="span10"><ul class="nav">'),is_designer&&buf.push('<li><a href="/designer/sales/" class="icon-tags">Sales</a></li>'),is_staff&&buf.push('<li><a href="#names" class="icon-tags">Names</a></li><li><a href="#tags" class="icon-tags">Tags</a></li>'),locals.premiumLibrary&&(buf.push("<li> <a"),buf.push(attrs({href:"#collections/"+premiumLibrary.uuid},{href:!0})),buf.push('><div class="sticker-new"></div>Activate '+escape(null==(interp=premiumLibrary.icon_counter)?"":interp)+" more icons</a></li>")),buf.push('<li><a href="#" class="icon-add new-font">New Font</a></li><li><a href="#" data-placement="bottom" title="SVG icons or fonts only" class="icon-import import-icons">Import Icons</a><div class="file-input-wrap"><input type="file" multiple="multiple" class="import-icons-input"/></div></li><li><a href="#collections" class="icon-categories">Collections</a></li><li><a href="#account" class="icon-account">Account</a></li></ul></div></div></div>')}return buf.join("")},exports.Templates.uploading_dialog=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="modal-body"><div class="uploading-progress"><div class="inner"></div></div><p class="process-title">Uploading icons...</p><p class="success-title">Uploading Completed!</p><p class="process-counter"><span class="current-file-number">0</span> / <span class="last-file-number">0</span></p><p class="success-message">Uploaded icons: <span class="success-file-number">0</span></p><p class="error-message">Ignored icons: <span class="error-file-number">0</span></p><p class="error-message">If you have any problems uploading your icons, please read our <a href="/faq/" target="_blank">FAQ page.</a></p></div><div class="modal-footer"><a href="#" class="btn cancel">Cancel</a><a href="#" data-dismiss="modal" aria-hidden="true" class="btn ok">Ok</a></div>');return buf.join("")},exports.Templates}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone");module.exports=b(c,d)}else"function"==typeof define&&define.amd&&define("backbone.wreqr",["underscore","backbone"],b)}(this,function(a,b){return b.Wreqr=function(a,b,c){var d={};return d.Handlers=function(a,b){var c=function(a){this.options=a,this._wreqrHandlers={},b.isFunction(this.initialize)&&this.initialize(a)};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback),this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw new Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),c}(a,c),d.CommandStorage=function(){var b=function(a){this.options=a,this._commands={},c.isFunction(this.initialize)&&this.initialize(a)};return c.extend(b.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){var c=this.getCommands(a);c.instances.push(b)},clearCommands:function(a){var b=this.getCommands(a);b.instances=[]}}),b}(),d.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0],b=Array.prototype.slice.call(arguments,1),this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,d){var e=this.storage.getCommands(a);c.each(e.instances,function(a){b.apply(d,a)}),this.storage.clearCommands(a)},_initializeStorage:function(a){var b,d=a.storageType||this.storageType;b=c.isFunction(d)?new d:d,this.storage=b}})}(d),d.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.getHandler(a).apply(this,b)}})}(d),d.EventAggregator=function(a,b){var c=function(){};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events),c}(a,c),d}(b,b.Marionette,a),b.Wreqr}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone");module.exports=b(c,d)}else"function"==typeof define&&define.amd&&define("backbone.babysitter",["underscore","backbone"],b)}(this,function(a,b){"option strict";return b.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCollection={},this._indexByCustom={},this._updateLength(),this._addInitialViews(a)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),a.collection&&(this._indexByCollection[a.collection.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength()},findByModel:function(a){var b=this._indexByModel[a.cid];return this.findByCid(b)},findByCollection:function(a){var b=this._indexByCollection[a.cid];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid],a.collection&&delete this._indexByCollection[a.collection.cid];var c;for(var d in this._indexByCustom)if(this._indexByCustom.hasOwnProperty(d)&&this._indexByCustom[d]===b){c=d;break}c&&delete this._indexByCustom[c],delete this._views[b],this._updateLength()},call:function(a,b){b=Array.prototype.slice.call(arguments,1),this.apply(a,b)},apply:function(a,c){c=c||[],b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c)})},_updateLength:function(){this.length=b.size(this._views)},_addInitialViews:function(a){if(a){var b,c,d=a.length;for(c=0;d>c;c++)b=a[c],this.add(b)}}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(b,a),b.ChildViewContainer}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone"),e=require("backbone.wreqr"),f=require("backbone.babysitter");module.exports=b(c,d,e,f)}else"function"==typeof define&&define.amd&&define("backbone.marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],b)}(this,function(a,b){return!function(a,b,c){function d(a){return g.call(a)}function e(a,b){var c=new Error(a);throw c.name=b||"Error",c}var f={};b.Marionette=f,f.$=b.$;var g=Array.prototype.slice;return f.extend=b.Model.extend,f.getOption=function(a,b){if(a&&b){var c;return c=a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]}},f.triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi,d=function(d){var e="on"+d.replace(b,a),f=this[e];return c.isFunction(this.trigger)&&this.trigger.apply(this,arguments),c.isFunction(f)?f.apply(this,c.tail(arguments)):void 0};return d}(),f.MonitorDOMRefresh=function(){function a(a){a._isShown=!0,d(a)}function b(a){a._isRendered=!0,d(a)}function d(a){a._isShown&&a._isRendered&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}return function(c){c.listenTo(c,"show",function(){a(c)}),c.listenTo(c,"render",function(){b(c)})}}(),function(a){function b(a,b,d,f){var g=f.split(/\s+/);c.each(g,function(c){var f=a[c];f||e("Method '"+c+"' was configured as an event handler, but does not exist."),a.listenTo(b,d,f,a)})}function d(a,b,c,d){a.listenTo(b,c,d,a)}function f(a,b,d,e){var f=e.split(/\s+/);c.each(f,function(c){var e=a[c];a.stopListening(b,d,e,a)})}function g(a,b,c,d){a.stopListening(b,c,d,a)}function h(a,b,d,e,f){b&&d&&(c.isFunction(d)&&(d=d.call(a)),c.each(d,function(d,g){c.isFunction(d)?e(a,b,g,d):f(a,b,g,d)}))}a.bindEntityEvents=function(a,c,e){h(a,c,e,d,b)},a.unbindEntityEvents=function(a,b,c){h(a,b,c,g,f)}}(f),f.Callbacks=function(){this._deferred=f.$.Deferred(),this._callbacks=[]},c.extend(f.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b}),this._deferred.done(function(c,d){b&&(c=b),a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=f.$.Deferred(),this._callbacks=[],c.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),f.Controller=function(a){this.triggerMethod=f.triggerMethod,this.options=a||{},c.isFunction(this.initialize)&&this.initialize(this.options)},f.Controller.extend=f.extend,c.extend(f.Controller.prototype,b.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),f.Region=function(a){if(this.options=a||{},this.el=f.getOption(this,"el"),!this.el){var b=new Error("An 'el' must be specified for a region.");throw b.name="NoElError",b}if(this.initialize){var c=Array.prototype.slice.apply(arguments);this.initialize.apply(this,c)}},c.extend(f.Region,{buildRegion:function(a,b){var d="string"==typeof a,e="string"==typeof a.selector,f="undefined"==typeof a.regionType,g="function"==typeof a;if(!g&&!d&&!e)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;d&&(h=a),a.selector&&(h=a.selector),g&&(i=a),!g&&f&&(i=b),a.regionType&&(i=a.regionType);var j=new i({el:h});return a.parentEl&&(j.getEl=function(b){var d=a.parentEl;return c.isFunction(d)&&(d=d()),d.find(b)}),j}}),c.extend(f.Region.prototype,b.Events,{show:function(a){this.ensureEl();var b=a.isClosed||c.isUndefined(a.$el),d=a!==this.currentView;d&&this.close(),a.render(),(d||b)&&this.open(a),this.currentView=a,f.triggerMethod.call(this,"show",a),f.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return f.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),f.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close(),delete this.$el}}),f.Region.extend=f.extend,f.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={},a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var d={};return c.each(a,function(a,e){"string"==typeof a&&(a={selector:a}),a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(e,a);d[e]=f},this),d},addRegion:function(b,d){var e,f=c.isObject(d),g=c.isString(d),h=!!d.selector;return e=g||f&&h?a.Region.buildRegion(d,a.Region):c.isFunction(d)?a.Region.buildRegion(d,a.Region):d,this._store(b,e),this.triggerMethod("region:add",b,e),e},get:function(a){return this._regions[a]},removeRegion:function(a){var b=this._regions[a];this._remove(a,b)},removeRegions:function(){c.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){c.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var b=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,b)},_store:function(a,b){this._regions[a]=b,this._setLength()},_remove:function(a,b){b.close(),delete this._regions[a],this._setLength(),this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=c.size(this._regions)}}),d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return c.each(d,function(a){b.prototype[a]=function(){var b=c.values(this._regions),d=[b].concat(c.toArray(arguments));return c[a].apply(c,d)}}),b}(f),f.TemplateCache=function(a){this.templateId=a},c.extend(f.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];return b||(b=new f.TemplateCache(a),this.templateCaches[a]=b),b.load()},clear:function(){var a,b=d(arguments),c=b.length;if(c>0)for(a=0;c>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),c.extend(f.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var b=f.$(a).html();return b&&0!==b.length||e("Could not find template: '"+a+"'","NoTemplateError"),b},compileTemplate:function(a){return c.template(a)}}),f.Renderer={render:function(a,b){if(!a){var c=new Error("Cannot render the template since it's false, null or undefined.");throw c.name="TemplateNotFoundError",c}var d;return d="function"==typeof a?a:f.TemplateCache.get(a),d(b)}},f.View=b.View.extend({constructor:function(a){c.bindAll(this,"render");var d=Array.prototype.slice.apply(arguments);this.options=a||{},b.View.prototype.constructor.apply(this,d),f.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:f.triggerMethod,getTemplate:function(){return f.getOption(this,"template")},serializeModel:function(a){return c.clone(a.attributes)},mixinTemplateHelpers:function(a){a=a||{};var b=f.getOption(this,"templateHelpers");return c.isFunction(b)&&(b=b.call(this)),c.extend(a,b)},configureTriggers:function(){if(this.triggers){var a={},b=c.result(this,"triggers");return c.each(b,function(b,d){var e=c.isObject(b),f=e?b.event:b;a[d]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,g=e?b.preventDefault:c,h=e?b.stopPropagation:d;g&&c&&c.apply(a),h&&d&&d.apply(a)}var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(f,i)}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a),f.bindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.bindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events,c.isFunction(a)&&(a=a.call(this));var d={},e=this.configureTriggers();c.extend(d,a,e),b.View.prototype.delegateEvents.call(this,d)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);b.View.prototype.undelegateEvents.apply(this,a),f.unbindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.unbindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var a=this.triggerMethod("before:close");a!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={},c.each(c.keys(a),function(b){var c=a[b];this.ui[b]=this.$(c)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),f.ItemView=f.View.extend({constructor:function(){f.View.prototype.constructor.apply(this,d(arguments))},serializeData:function(){var a={};return this.model?a=this.serializeModel(this.model):this.collection&&(a={items:this.serializeCollection(this.collection)}),a},serializeCollection:function(a){return a.map(function(a){return this.serializeModel(a)},this)},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var b=this.getTemplate(),c=f.Renderer.render(b,a);return this.$el.html(c),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),f.View.prototype.close.apply(this,d(arguments)),this.triggerMethod("item:closed"))}}),f.CollectionView=f.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),f.View.prototype.constructor.apply(this,d(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer),this.initRenderBuffer(),this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){f.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView(),this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b),this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var c=new b.Model;this.addItemView(c,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return f.getOption(this,"emptyView")},getItemView:function(){var a=f.getOption(this,"itemView");return a||e("An `itemView` must be specified","NoItemViewError"),a},addItemView:function(a,b,d){var e=f.getOption(this,"itemViewOptions");c.isFunction(e)&&(e=e.call(this,a,d));var g=this.buildItemView(a,b,e);this.addChildViewEventForwarding(g),this.triggerMethod("before:item:added",g),this.children.add(g),this.renderItemView(g,d),this._isShown&&f.triggerMethod.call(g,"show"),this.triggerMethod("after:item:added",g)},addChildViewEventForwarding:function(a){var b=f.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var c=d(arguments);c[0]=b+":"+c[0],c.splice(1,0,a),f.triggerMethod.apply(this,c)},this)},renderItemView:function(a,b){a.render(),this.appendHtml(this,a,b)},buildItemView:function(a,b,d){var e=c.extend({model:a},d);return new b(e)},removeItemView:function(a){var b=this.children.findByModel(a);this.removeChildView(b),this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a)),this.triggerMethod("item:removed",a)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,b){a.isBuffering?a.elBuffer.appendChild(b.el):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new b.ChildViewContainer
},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),f.View.prototype.close.apply(this,d(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this),this.checkEmpty()}}),f.CompositeView=f.CollectionView.extend({constructor:function(){f.CollectionView.prototype.constructor.apply(this,d(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=f.getOption(this,"itemView")||this.constructor;return a||e("An `itemView` must be specified","NoItemViewError"),a},serializeData:function(){var a={};return this.model&&(a=this.serializeModel(this.model)),a},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(f.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={};a=this.serializeData(),a=this.mixinTemplateHelpers(a);var b=this.getTemplate();return f.Renderer.render(b,a)},appendBuffer:function(a,b){var c=this.getItemViewContainer(a);c.append(b)},appendHtml:function(a,b){if(a.isBuffering)a.elBuffer.appendChild(b.el);else{var c=this.getItemViewContainer(a);c.append(b.el)}},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b,d=f.getOption(a,"itemViewContainer");if(d){var g=c.isFunction(d)?d():d;b=a.$(g),b.length<=0&&e("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")}else b=a.$el;return a.$itemViewContainer=b,b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),f.Layout=f.ItemView.extend({regionType:f.Region,constructor:function(a){a=a||{},this._firstRender=!0,this._initializeRegions(a),f.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments),b=f.ItemView.prototype.render.apply(this,a);return b},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);f.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=c.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},_buildRegions:function(a){var b=this,c={regionType:f.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager(),b=c.isFunction(this.regions)?this.regions(a):this.regions||{},this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new f.RegionManager,this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b,this.trigger("region:add",a,b)}),this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a],this.trigger("region:remove",a,b)})}}),f.AppRouter=b.Router.extend({constructor:function(a){b.Router.prototype.constructor.apply(this,d(arguments)),this.options=a||{};var c=f.getOption(this,"appRoutes"),e=this._getController();this.processAppRoutes(e,c)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return f.getOption(this,"controller")},_addAppRoute:function(a,b,d){var e=a[d];if(!e)throw new Error("Method '"+d+"' was not found on the controller");this.route(b,d,c.bind(e,a))}}),f.Application=function(a){this._initRegionManager(),this._initCallbacks=new f.Callbacks,this.vent=new b.Wreqr.EventAggregator,this.commands=new b.Wreqr.Commands,this.reqres=new b.Wreqr.RequestResponse,this.submodules={},c.extend(this,a),this.triggerMethod=f.triggerMethod},c.extend(f.Application.prototype,b.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a),this._initCallbacks.run(a,this),this.triggerMethod("initialize:after",a),this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(){var a=d(arguments);return a.unshift(this),f.Module.create.apply(f.Module,a)},_initRegionManager:function(){this._regionManager=new f.RegionManager,this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b}),this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}}),f.Application.extend=f.extend,f.Module=function(a,b){this.moduleName=a,this.submodules={},this._setupInitializersAndFinalizers(),this.app=b,this.startWithParent=!0,this.triggerMethod=f.triggerMethod},c.extend(f.Module.prototype,b.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,f.triggerMethod.call(this,"before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),f.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var e=c.flatten([this,this.app,b,f,f.$,c,d]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new f.Callbacks,this._finalizerCallbacks=new f.Callbacks}}),c.extend(f.Module,{create:function(a,b,e){var f=a,g=d(arguments);g.splice(0,3),b=b.split(".");var h=b.length,i=[];return i[h-1]=e,c.each(b,function(b,c){var d=f;f=this._getModule(d,b,a),this._addModuleDefinition(d,f,i[c],g)},this),f},_getModule:function(a,b,c){var d=a[b];return d||(d=new f.Module(b,c),a[b]=d,a.submodules[b]=d),d},_addModuleDefinition:function(a,b,d,e){var f,g;c.isFunction(d)?(f=d,g=!0):c.isObject(d)?(f=d.define,g=d.startWithParent):g=!0,f&&b.addDefinition(f,e),b.startWithParent=b.startWithParent&&g,b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),f}(this,b,a),b.Marionette}),define("backbone.stickit",["underscore","jquery","backbone"],function(a,b,c){c.Stickit={_handlers:[],addHandler:function(b){b=a.map(a.flatten([b]),function(b){return a.extend({updateModel:!0,updateView:!0,updateMethod:"text"},b)}),this._handlers=this._handlers.concat(b)}},a.extend(c.View.prototype,{_modelBindings:null,unstickit:function(b){var c=[],d=this;a.each(this._modelBindings,function(a,e){return b&&a.model!==b?!1:(a.model.off(a.event,a.fn),c.push(a.model),delete d._modelBindings[e],void 0)}),a.each(a.uniq(c),function(a){a.trigger("stickit:unstuck",d.cid)}),this._modelBindings=a.compact(this._modelBindings),this.$el.off(".stickit"+(b?"."+b.cid:""))},stickit:function(b,c){var d=this,f=b||this.model,o=".stickit."+f.cid,p=c||this.bindings||{};this._modelBindings||(this._modelBindings=[]),this.unstickit(f),a.each(a.keys(p),function(b){var c,q,r,s,t=p[b]||{},u=a.uniqueId();":el"!=b?c=d.$(b):(c=d.$el,b=""),c.length&&(a.isString(t)&&(t={observe:t}),a.isFunction(t.observe)&&(t.observe=t.observe.call(d)),s=k(c,t),r=s.observe,s.bindId=u,s.view=d,q=a.extend({stickitChange:s},s.setOptions||{}),l(d,c,s,f,r),m(d,c,s,f,r),r&&(a.each(s.events||[],function(e){var h=e+o,j=function(b){var e=s.getVal.call(d,c,b,s,a.rest(arguments));g(d,s.updateModel,e,s)&&i(f,r,e,q,d,s)};""===b?d.$el.on(h,j):d.$el.on(h,b,j)}),a.each(a.flatten([r]),function(a){h(f,d,"change:"+a,function(a,b,e){var f=e&&e.stickitChange&&e.stickitChange.bindId||null;f!=u&&n(d,c,s,j(a,r,s,d),a)})}),n(d,c,s,j(f,r,s,d),f,!0)),f.on("stickit:unstuck",function(a){a==d.cid&&e(d,s.destroy,c,f,s)}),e(d,s.initialize,c,f,s))}),this.remove=a.wrap(this.remove,function(b){var c=d;return d.unstickit(),b&&(c=b.apply(d,a.rest(arguments))),c})}});var d=function(b,c){var d=(c||"").split("."),e=a.reduce(d,function(a,b){return a[b]},b);return null==e?b:e},e=function(b,c){return c?(a.isString(c)?b[c]:c).apply(b,a.toArray(arguments).slice(2)):void 0},f=function(a){return a.find("option").not(function(){return!this.selected})},g=function(b,c){return a.isBoolean(c)?c:a.isFunction(c)||a.isString(c)?e.apply(this,a.toArray(arguments)):!1},h=function(a,b,c,d){a.on(c,d,b),b._modelBindings.push({model:a,event:c,fn:d})},i=function(a,b,c,d,f,g){g.onSet&&(c=e(f,g.onSet,c,g)),a.set(b,c,d)},j=function(b,c,d,f){var g,h=function(c){var e=d.escape?b.escape(c):b.get(c);return a.isUndefined(e)||a.isNull(e)?"":e};return g=a.isArray(c)?a.map(c,h):h(c),d.onGet?e(f,d.onGet,g,d):g},k=c.Stickit.getConfiguration=function(b,d){var e=[{updateModel:!1,updateMethod:"text",update:function(a,b,c,d){a[d.updateMethod]&&a[d.updateMethod](b)},getVal:function(a,b,c){return a[c.updateMethod]()}}];a.each(c.Stickit._handlers,function(a){b.is(a.selector)&&e.push(a)}),e.push(d);var f=a.extend.apply(a,e);return f.visible&&!a.has(f,"updateView")?f.updateView=!1:a.has(f,"updateView")||(f.updateView=!0),delete f.selector,f},l=function(b,c,d,e,f){var g=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","loop","multiple","open","readonly","required","scoped","selected"];a.each(d.attributes||[],function(d){var i,k,l="";d=a.clone(d),i=d.observe||(d.observe=f),k=function(){var f=a.indexOf(g,d.name,!0)>-1?"prop":"attr",h=j(e,i,d,b);"class"==d.name?(c.removeClass(l).addClass(h),l=h):c[f](d.name,h)},a.each(a.flatten([i]),function(a){h(e,b,"change:"+a,k)}),k()})},m=function(b,c,d,f,g){if(null!=d.visible){var i=function(){var h=d.visible,i=d.visibleFn,k=j(f,g,d,b),l=!!k;(a.isFunction(h)||a.isString(h))&&(l=e(b,h,k,d)),i?e(b,i,c,l,d):l?c.show():c.hide()};a.each(a.flatten([g]),function(a){h(f,b,"change:"+a,i)}),i()}},n=function(a,b,c,d,f,h){g(a,c.updateView,d,c)&&(e(a,c.update,b,d,f,c),h||e(a,c.afterUpdate,b,d,c))};c.Stickit.addHandler([{selector:'[contenteditable="true"]',updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:'input[type="radio"]',events:["change"],update:function(a,b){a.filter('[value="'+b+'"]').prop("checked",!0)},getVal:function(a){return a.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(c,d){c.length>1?(d||(d=[]),a.each(c,function(c){a.indexOf(d,b(c).val())>-1?b(c).prop("checked",!0):b(c).prop("checked",!1)})):a.isBoolean(d)?c.prop("checked",d):c.prop("checked",d==c.val())},getVal:function(c){var d;if(c.length>1)d=a.reduce(c,function(a,c){return b(c).prop("checked")&&a.push(b(c).val()),a},[]);else{d=c.prop("checked");var e=c.val();"on"!=e&&null!=e&&(d=d?c.val():null)}return d}},{selector:"select",events:["change"],update:function(f,g,h,i){var j,k=i.selectOptions,l=k&&k.collection||void 0,m=f.prop("multiple");if(!k){k={};var n=function(a){return a.map(function(){return{value:this.value,label:this.text}}).get()};f.find("optgroup").length?(l={opt_labels:[]},f.find("> option").length&&(l.opt_labels.push(void 0),a.each(f.find("> option"),function(a){l[void 0]=n(b(a))})),a.each(f.find("optgroup"),function(a){var c=b(a).attr("label");l.opt_labels.push(c),l[c]=n(b(a).find("option"))})):l=n(f.find("option"))}k.valuePath=k.valuePath||"value",k.labelPath=k.labelPath||"label";var o=function(c,e,f){a.each(c,function(c){var g=b("<option/>"),h=c,i=function(b,c){g.text(b),h=c,g.data("stickit_bind_val",h),a.isArray(h)||a.isObject(h)||g.val(h)};"__default__"===c?i(k.defaultOption.label,k.defaultOption.value):i(d(c,k.labelPath),d(c,k.valuePath)),!m&&null!=h&&null!=f&&h==f||a.isObject(f)&&a.isEqual(h,f)?g.prop("selected",!0):m&&a.isArray(f)&&a.each(f,function(b){a.isObject(b)&&(b=d(b,k.valuePath)),(b==h||a.isObject(b)&&a.isEqual(h,b))&&g.prop("selected",!0)}),e.append(g)})};f.html("");var p=function(a,b){var c=window;return 0===b.indexOf("this.")&&(c=a),b=b.replace(/^[a-z]*\.(.+)$/,"$1"),d(c,b)};if(j=a.isString(l)?p(this,l):a.isFunction(l)?e(this,l,f,i):l,j instanceof c.Collection&&(j=j.toJSON()),k.defaultOption&&o(["__default__"],f),a.isArray(j))o(j,f,g);else if(j.opt_labels)a.each(j.opt_labels,function(a){var c=b("<optgroup/>").attr("label",a);o(j[a],c,g),f.append(c)});else{var q,r=[];for(var s in j)q={},q[k.valuePath]=s,q[k.labelPath]=j[s],r.push(q);o(a.sortBy(r,k.comparator||k.labelPath),f,g)}},getVal:function(a){var c;return c=a.prop("multiple")?b(f(a).map(function(){return b(this).data("stickit_bind_val")})).get():f(a).data("stickit_bind_val")}}])}),define("libs/backbone/index",["underscore","backbone"],function(a,b){function c(a,b,c,e){var f=c.join("");return a._index||g(a,e),a._index[f]||d(a,f,c),a._index[f]}function d(a,b,c){a._indexKeys.push(c),a._index[b]=a.groupBy(function(a){return e(a.attributes,c)})}function e(a,b){for(var c="",d=0,e=b.length;e>d;d++)c+=a[b[d]];return c}function f(b){var c,d,e,g,h,i=[],j=a.first(b),k=j[0],l=j[1];for(a.isArray(l)||(l=[l]),c=0,e=l.length;e>c;c++)h=l[c],h&&h.id&&(h=h.id),i.push(a.object([k],[h]));if(b.length>1){var m=f(a.rest(b)),n=[];for(c=0,e=i.length;e>c;c++)for(d=0,g=m.length;g>d;d++)n[g*c+d]=a.extend({},i[c],m[d]);return n}return i}function g(a,b){a._index={},a._indexKeys=[],a.on("add",l(i)),a.on("remove",l(j)),b.ignoreChange||a.on("change",k),b.ignoreReset||a.on("reset",h)}function h(a){a._index={},a._indexKeys=[]}function i(b,c,d){a.has(b,c)?b[c].push(d):b[c]=[d]}function j(b,c,d){a.has(b,c)&&(b[c]=a.without(b[c],d))}function k(b){var c=a.keys(b.changedAttributes()),d=a.bind(a.include,null,c),f=b.previousAttributes();l(function(b,c,g,h){if(a.some(h,d)){var k=e(f,h);j(b,k,g),i(b,c,g)}})(b)}function l(b){return function(c){var d=c.collection;a.forEach(d._indexKeys,function(a){var f=a.join(""),g=d._index[f],h=e(c.attributes,a);b(g,h,c,a)})}}b.Index=function(b,d){d||(d={}),b.prototype.where=function(b,f){if(a.filter(a.values(b),a.isArray).length)return this.query(b);var g=a.keys(b).sort(),h=c(this,b,g,d)[e(b,g)]||[];return f?a.first(h):h},b.prototype.query=function(b){for(var c=f(a.pairs(b)),d=[],e=0,g=c.length;g>e;e++)d=d.concat(this.where(c[e]));return d}}}),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b},c=[].slice,d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};define("utils/tastypie",["jquery","underscore","backbone"],function(a,e,f){var g,h,i,j,k,l;return g={},j=function(a,b,c){var d;switch(a){case void 0:return b===c;case"contains":return-1!==b.indexOf(c);case"icontains":return-1!==b.toLowerCase().indexOf(c.toLowerCase());case"startswith":return 0===b.lastIndexOf(c,0);case"endswith":return d=b.lastIndexOf(c),d>=0&&d===b.length-c.length;case"iexact":return b.toLowerCase()===c.toLowerCase();case"regex":return new RegExp(c,"gi").test(b)}},g.Model=function(a){function d(){return l=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.url=function(){var a;return a=i(this,"urlRoot")||i(this.collection,"urlRoot")||k(),this.isNew()||(a+=h(this.get("id"))+"/"),a},d.prototype.save=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],this.saveDeferred=d.__super__.save.apply(this,a)},d}(f.Model),g.Collection=function(d){function f(){var a,b,d,g;b=arguments[0],d=arguments[1],a=3<=arguments.length?c.call(arguments,2):[],f.__super__.constructor.apply(this,[b,d].concat(c.call(a))),g=this.filters,this.filters={limit:0},g&&e.extend(this.filters,g),d&&d.filters&&e.extend(this.filters,d.filters)}return b(f,d),f.prototype.url=function(b){var c,d,e;return e=this.urlRoot,b&&(c=function(){var a,c,e;for(e=[],a=0,c=b.length;c>a;a++)d=b[a],e.push(h(d.get("id")));return e}().join(";"),e+="set/"+c+"/"),this.filters&&(e+="?"+a.param(this.filters)),e},f.prototype.parse=function(a){return null!=(null!=a?a.objects:void 0)?a.objects:a},f.prototype.where=function(a,b){return e.isEmpty(a)?null!=b?b:{0:[]}:this[b?"find":"filter"](function(b){var c,d,f,g,h,i,k,l,m,n;for(d in a)for(k=a[d],n=d.split("__"),d=n[0],i=n[1],h=b.get(d),e.isArray(h)||(h=[h]),g=h.length-1,f=l=0,m=h.length;m>l&&(c=h[f],!j(i,c,k));f=++l)if(f===g)return!1;return!0})},f}(f.Collection),h=function(a){return d.call(a,"/")>=0&&(a=e.chain(a.split("/")).compact().last().value()),a},i=function(a,b){return a&&a[b]?e.isFunction(a[b])?a[b]():a[b]:null},k=function(){throw new Error('An "url" property or function must be specified')},f.Tastypie=g})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("backbone_all",["underscore","backbone","templates","backbone.marionette","backbone.stickit","libs/backbone/index","utils/tastypie"],function(a,c,d){var e;return c.Marionette.Renderer.render=function(b,c){if(a.isFunction(b))return b(c);if(!d[b])throw"Template '"+b+"' not found!";return d[b](c)},c.Marionette.CachingRegion=function(d){function f(){return e=f.__super__.constructor.apply(this,arguments)}return b(f,d),f.prototype.change=function(b,d,e){var f,g;return null==this.cachedViews&&(this.cachedViews={}),null==e&&(e={}),a.defaults(e,{transition:!1,addToCache:!0}),this.ensureEl(),this.currentViewID===b?(e.transition&&(this.currentView.$el.hide(),this.currentView.$el.fadeIn("slow")),this.currentView):(null!=(g=this.currentView)&&g.$el.hide(),!this.currentViewID||this.currentViewID in this.cachedViews||this.close(),b in this.cachedViews?this.currentView=this.cachedViews[b]:(f=d(),e.addToCache&&(this.cachedViews[b]=f),f.render(),this.$el.append(f.el),this.currentView=f,this.currentView.$el.hide()),this.currentViewID=b,this.currentView.$el.fadeIn("slow"),c.Marionette.triggerMethod.call(this.currentView,"show"),c.Marionette.triggerMethod.call(this,"show",this.currentView),this.currentView)},f}(c.Marionette.Region),c})}.call(this),function(){define("app",["backbone_all"],function(a){var b;return b=new a.Marionette.Application,b.addRegions({topbarRegion:".topbar-region",bodyRegion:{selector:".body-region",regionType:a.Marionette.CachingRegion}}),b})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/not_found_view",["backbone_all"],function(a){var c,d;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="not_found",c}(a.Marionette.ItemView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/download_tab_view",["backbone_all","app"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.template="download_tab",d.prototype.ui={counter:".counter"},d.prototype.initialize=function(){return this.model=c.fonts.getCurrent(),this.listenTo(this.model.related.glyphs,"add remove reset",this.updateCounter)},d.prototype.onRender=function(){return this.updateCounter()},d.prototype.updateCounter=function(){return this.ui.counter.text(this.model.related.glyphs.length)},d}(a.Marionette.ItemView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/navbar_view",["backbone_all","app","views/download_tab_view"],function(a,c,d){var e,f;return e=function(a){function e(){return f=e.__super__.constructor.apply(this,arguments)}return b(e,a),e.prototype.template="navbar",e.prototype.events={"input .filter input":"updateIconFilter","click .filter-reset":function(a){return a.preventDefault(),c.vent.trigger("iconFilter:reset")}},e.prototype.regions={downloadTabRegion:".download-tab-region"},e.prototype.ui={iconFilter:".filter input",filterReset:".filter-reset"},e.prototype.initialize=function(){return this.listenTo(c.vent,"iconFilter:reset",this.resetFilter)},e.prototype.onRender=function(){return this.downloadTabRegion.show(new d)},e.prototype.updateIconFilter=function(a){var b;return a.preventDefault(),b=this.ui.iconFilter.val(),b?this.ui.filterReset.show():this.ui.filterReset.hide(),b.length>1?c.vent.trigger("iconFilter:apply",b):c.vent.trigger("iconFilter:reset",b)},e.prototype.resetFilter=function(a){return a?void 0:(this.ui.iconFilter.val(""),this.ui.filterReset.hide())},e}(a.Marionette.Layout)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/select_font_view",["backbone_all"],function(a){var c,d,e,f;return c=function(a){function c(){return e=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="li",c.prototype.template="select_font_item",c}(a.Marionette.ItemView),d=function(a){function d(){return f=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.template="select_font",d.prototype.itemViewContainer=".dropdown-menu",d.prototype.itemView=c,d.prototype.modelEvents={"change:full_name":"render"},d.prototype.initialize=function(){return this.model=this.collection.getCurrent()},d}(a.Marionette.CompositeView)})}.call(this),function(){define("utils/helpers",[],function(){return{slugify:function(a){return a.toLowerCase().replace(/[\s_]+/g,"-").replace(/[^-\w]+/g,"").replace(/-{2,}/g,"-").replace(/^-/g,"").replace(/-$/g,"")},after:function(a,b){return setTimeout(b,a)},every:function(a,b){return setInterval(b,a)},getChunks:function(a,b){var c,d,e;for(d=[],c=a.length,e=0;c>e;)d.push(a.slice(e,e+b)),e+=b;return d}}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/dialog_view",["backbone_all"],function(a){var c,d;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments)}return b(e,c),e.prototype.template="dialog",e.prototype.className="modal hide fade",e.prototype.events={"click .submit":"onSubmit",hidden:"onHidden"},e.prototype.initialize=function(b){return this.model=new a.Model({header:b.header,body:b.body,submitText:b.submitText}),this.callback=b.callback,this.render()},e.prototype.onRender=function(){return this.$el.modal()},e.prototype.onSubmit=function(a){var b=this;return a.preventDefault(),this.$el.modal("hide").one("hidden",function(){return b.callback()})},e.prototype.onHidden=function(){return this.close()},e}(a.Marionette.ItemView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/form_view",["backbone_all"],function(a){var c,d;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="form",c.prototype.className="modal hide fade",c.prototype.events={submit:"onSubmit",hidden:"onHidden",shown:"onShown"},c.prototype.initialize=function(){return this.render()},c.prototype.onRender=function(){return this.$el.modal()},c.prototype.onShown=function(){return this.$("input:first").focus()},c.prototype.onSubmit=function(a){var b,c,d,e,f,g,h,i,j,k,l=this;for(a.preventDefault(),d={},i=this.$el.serializeArray(),e=0,g=i.length;g>e;e++){if(b=i[e],null!=(j=this.filters)?j[b.name]:void 0)for(k=this.filters[b.name],f=0,h=k.length;h>f;f++)c=k[f],b.value=c(b.value);d[b.name]=b.value}return this.model.set(d),this.$el.modal("hide").one("hidden",function(){return l.model.save()})},c.prototype.onHidden=function(){return this.close()},c}(a.Marionette.ItemView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/font_form_view",["backbone_all","app","utils/helpers","views/dialog_view","views/form_view"],function(b,d,e,f,g){var h,i;return h=function(b){function g(){return this.toggleDeleteFontButtonState=a(this.toggleDeleteFontButtonState,this),i=g.__super__.constructor.apply(this,arguments)}return c(g,b),g.prototype.template="font_form",g.prototype.filters={css_class_prefix:[e.slugify,function(a){return a.substr(0,20)}]},g.prototype.events={submit:"onSubmit",hidden:"onHidden",shown:"onShown","click .delete-font":"deleteCurrentFont"},g.prototype.ui={deleteFontWrap:".delete-font-wrap"},g.prototype.onRender=function(){return g.__super__.onRender.call(this),this.toggleDeleteFontButtonState()},g.prototype.deleteCurrentFont=function(a){return a.preventDefault(),1!==d.fonts.length?new f({header:"Confirm deleting",body:"Are you sure you want to delete the font?",submitText:"Delete font",callback:function(){return d.fonts.getCurrent().destroy(),d.vent.trigger("currentFont:changed"),d.router.index()}}):void 0},g.prototype.toggleDeleteFontButtonState=function(){return d.fonts.length<=1?this.ui.deleteFontWrap.hide():void 0},g}(g)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/fontbar_view",["backbone_all","app","views/select_font_view","views/font_form_view"],function(a,c,d,e){var f,g;return f=function(a){function f(){return g=f.__super__.constructor.apply(this,arguments)}return b(f,a),f.prototype.template="fontbar",f.prototype.regions={selectFont:".select-font-wrap"},f.prototype.events={"click .edit-font":"showFontForm","click #reset-current-font":"resetIconSelection"},f.prototype.initialize=function(){return this.listenTo(c.vent,"currentFont:changed",this.onRender)},f.prototype.onRender=function(){var a;return a=new d({collection:c.fonts}),this.selectFont.show(a)},f.prototype.showFontForm=function(a){return a.preventDefault(),new e({model:c.fonts.getCurrent()})},f.prototype.resetIconSelection=function(a){return a.preventDefault(),c.fonts.getCurrent().related.glyphs.deleteAll(),c.vent.trigger("currentFont:glyphsRemoved")},f}(a.Marionette.Layout)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/font_layout",["backbone_all","app","views/navbar_view","views/fontbar_view"],function(a,c,d,e){var f,g;return f=function(f){function h(){return g=h.__super__.constructor.apply(this,arguments)}return b(h,f),h.prototype.template="font_layout",h.prototype.regionType=a.Marionette.CachingRegion,h.prototype.regions={navbarRegion:".navbar-region",fontbarRegion:".fontbar-region",contentRegion:{selector:".content",regionType:a.Marionette.CachingRegion}},h.prototype.initialize=function(){return this.listenTo(c.vent,"currentFont:changed",this.onFontChanged),this.listenTo(c.vent,"currentFont:resetIconSelection",this.reselectIcons),this.listenTo(c.vent,"currentFont:glyphRemoved",this.reselectIcons),this.listenTo(c.vent,"currentFont:glyphsRemoved",this.deselectIcons)},h.prototype.onRender=function(){var a,b;return b=new d({model:c.fonts.getCurrent()}),this.navbarRegion.show(b),this.fontbarRegion.currentView?void 0:(a=new e({model:c.fonts.getCurrent()}),this.fontbarRegion.show(a))},h.prototype.onFontChanged=function(){return this.onRender(),this.reselectIcons()},h.prototype.reselectIcons=function(){var a,b;if("librariesView"in this.contentRegion.cachedViews)return a=this.contentRegion.cachedViews.librariesView,a.$el.find(".icon.selected").removeClass("selected"),b=c.libraries.getSelectedIconsFor(c.fonts.getCurrent()),b.length?a.children.call("markIconsAsSelected",[b]):void 0},h.prototype.deselectIcons=function(){var a;if("librariesView"in this.contentRegion.cachedViews)return a=this.contentRegion.cachedViews.librariesView,a.$el.find(".icon.selected").removeClass("selected")},h}(a.Marionette.Layout)})}.call(this),function(){define("views/empty_view",["backbone_all"],function(a){var b;return b=function(b){return a.Marionette.ItemView.extend({template:"empty_view",className:b.className||"empty-view",tagName:b.tagName||"div",initialize:function(){return this.model=new a.Model({message:b.message})}})}})}.call(this),function(a){function b(a){var b,e=c(a.units),f=Date.now(),h=d(a.from,e,f),i=d(a.to,e,f),j=h-i;return j>0?b="past":(b="future",j=-j),g(j,b,a.lang)}function c(a){if("undefined"==typeof a)return"ms";if("s"===a||"ms"===a)return a;throw new Error("Invalid units")}function d(a,b,c){if("undefined"==typeof a)return c;if("string"==typeof a&&(a=parseInt(a,10)),e(a)&&f(a))throw new Error("Invalid time");return"number"==typeof a&&"s"===b&&(a*=1e3),a}function e(a){return"[object Date]"!==Object.prototype.toString.call(a)||isNaN(a.getTime())}function f(a){return"number"!=typeof a||isNaN(a)}function g(a,b,c){var d,e,f=j[c]||j.en;for(d in i)if(i.hasOwnProperty(d)&&a>=i[d])return e=Math.floor(a/i[d]),f[b](e,f[d][(e>1)+0]);return f.defaults[b]}function h(){"function"==typeof define&&define.amd?define("libs/vaguetime",[],function(){return k}):"undefined"!=typeof module&&null!==module?module.exports=k:a.vagueTime=k}var i={year:315576e5,month:26298e5,week:6048e5,day:864e5,hour:36e5,minute:6e4},j={en:{year:["year","years"],month:["month","months"],week:["week","weeks"],day:["day","days"],hour:["hour","hours"],minute:["minute","minutes"],past:function(a,b){return a+" "+b+" ago"},future:function(a,b){return"in "+a+" "+b},defaults:{past:"just now",future:"soon"}},de:{year:["Jahr","Jahren"],month:["Monat","Monaten"],week:["Woche","Wochen"],day:["Tag","Tagen"],hour:["Stunde","Stunden"],minute:["Minute","Minuten"],past:function(a,b){return"vor "+a+" "+b},future:function(a,b){return"in "+a+" "+b},defaults:{past:"jetzt gerade",future:"bald"}}},k={get:b};h()}(this),function(){define("utils/svg",["underscore","jquery"],function(a,b){var c,d,e,f,g;return g=function(a,b){var c;if(a.length)return c=b/512,a.children("path").attr("transform","scale("+c+" "+c+")")
},e=function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;for(c=b(a),o=[],d=c.find("font-face"),i=c.find("font").attr("horiz-adv-x"),h=parseInt(d.attr("ascent"),10),j=parseInt(d.attr("descent"),10),q=h-j,n=[],x=c.find("glyph"),r=0,u=x.length;u>r;r++)k=x[r],e=b(k),l=e.attr("d"),m=e.attr("horiz-adv-x")||i,l&&l.length>20&&n.push({d:l,width:m});for(s=0,v=n.length;v>s;s++)if(k=n[s],p="<svg viewBox='0 0 "+k.width+" "+q+"'><g transform='matrix(1 0 0 -1 0 "+h+")'><path d='"+k.d+"' /></g></svg>",f=b(p).appendTo("body"),g=f[0].getBBox(),f.remove(),g.height===q){g.y<0&&(h-=g.y);break}for(t=0,w=n.length;w>t;t++)k=n[t],o.push("<svg viewBox='0 0 "+k.width+" "+q+"'><g transform='matrix(1 0 0 -1 0 "+h+")'><path d='"+k.d+"' /></g></svg>");return o},f=function(a){var c,d,e,f,g,h;return c=b(a),a=c[0],d=[],h=a.getAttribute("width"),f=a.getAttribute("height"),g=a.getAttribute("viewBox"),h&&d.push('width="'+h+'"'),f&&d.push('height="'+f+'"'),g&&d.push('viewBox="'+g+'"'),c.find("metadata").remove(),c.find("#adobe_illustrator_pgf").remove(),e=b("<div>").append(c).html().replace(/.*<svg[^>]*>/i,""),"<svg "+d.join(" ")+">"+e},c=function(a){var b;return b=a.replace(/(\r|.|\n)+<svg/i,"<svg").replace(/<\/svg>(\r|.|\n)+/i,"</svg>"),-1!==b.indexOf("metadata")&&(b=f(b)),b},d=function(a){var b;return b=/font-face/i.test(a)?e(a):[c(a)]},{extractIcons:d,resize:g}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/personal_icon_view",["backbone_all","utils/svg","app","views/dialog_view"],function(b,d,e,f){var g,h;return g=function(b){function g(){return this.triggerFileInput=a(this.triggerFileInput,this),this.updateIcon=a(this.updateIcon,this),h=g.__super__.constructor.apply(this,arguments)}return c(g,b),g.prototype.template="personal_icon",g.prototype.tagName="li",g.prototype.events={"click .icon":"selectIcon","click .delete":"onDeleteIcon","change .update-icon-input":"updateIcon","click .update-icon":"triggerFileInput"},g.prototype.ui={icon:".icon"},g.prototype.modelEvents={"change:svg":"render"},g.prototype.onRender=function(){return d.resize(this.$el.find("svg"),24),this.model.isSelectedFor(e.fonts.getCurrent())&&this.ui.icon.addClass("selected"),e.user.get("is_staff")?void 0:this.$el.find(".update-icon").remove()},g.prototype.selectIcon=function(){return this.ui.icon.hasClass("selected")?this.deleteGlyph():this.createGlyph(),this.ui.icon.toggleClass("selected")},g.prototype.onDeleteIcon=function(a){var b=this;return a.preventDefault(),new f({header:"Confirm deleting",body:"Are you sure you want to delete this icon?",submitText:"Delete icon",callback:function(){return b.deleteIcon()}})},g.prototype.deleteIcon=function(){var a,b,c,d,f=this;for(d=e.fonts.models,b=0,c=d.length;c>b;b++)a=d[b],a.related.glyphs.deleteByIcon(this.model);return this.$el.fadeOut(150,function(){return f.model.destroy()})},g.prototype.createGlyph=function(){return e.fonts.getCurrent().related.glyphs.create(this.model)},g.prototype.deleteGlyph=function(){return e.fonts.getCurrent().related.glyphs.deleteByIcon(this.model)},g.prototype.updateIcon=function(a){var b,c,e=this;return a.preventDefault(),b=a.target.files[0],b.type.match("image.svg")?(c=new FileReader,c.onload=function(a){return e.model.save({svg:d.extractIcons(a.target.result)[0]},{wait:!0})},c.readAsText(b)):void 0},g.prototype.triggerFileInput=function(a){return a.preventDefault(),this.$el.find(".update-icon-input").trigger("click")},g}(b.Marionette.ItemView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/icon_view",["views/personal_icon_view"],function(a){var c,d;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="icon",c.prototype.events={"click .icon":"selectIcon"},c}(a)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/library_view",["underscore","jquery","backbone_all","libs/vaguetime","app","views/empty_view","views/icon_view"],function(b,d,e,f,g,h,i){var j,k;return j=function(e){function j(){return this.onSelected=a(this.onSelected,this),k=j.__super__.constructor.apply(this,arguments)}return c(j,e),j.prototype.tagName="li",j.prototype.itemViewContainer=".icons",j.prototype.emptyView=h({message:"This collection is empty."}),j.prototype.template="library",j.prototype.itemView=i,j.prototype.events={"click .library-name":"closeLibraryToggle",xselectableselected:"onSelected",xselectableselecting:"onSelecting",xselectableunselecting:"onSelecting"},j.prototype.bindings={".library-name":"name",".discount-link":{observe:"discount_expires_in",visible:!0},".trial-expiration":{observe:"trial_expires_in",onGet:function(a){return a?f.get({from:0,to:a,units:"s"}):void 0}}},j.prototype.collectionEvents={"add remove":"updateIconCounter"},j.prototype.ui={iconsList:".icons-wrapper",iconCounter:".icon-counter",closeLibraryToggle:".library-name",foundIconsCounter:".found-icons-counter"},j.prototype.initialize=function(){return this.collection=this.model.related.icons},j.prototype.onBeforeRender=function(){return this.model.get("icon_groups").length?this.groupContainers={}:void 0},j.prototype.onRender=function(){return this.stickit(),this.updateIconCounter(),this.ui.iconsList.xselectable({filter:".icons li"})},j.prototype.onClose=function(){return this.ui.iconsList.xselectable("destroy")},j.prototype.appendHtml=function(a,b){var c,d;return d=b.model.get("group"),d&&this.groupContainers?(c=this.groupContainers[d],c||(c=this.$("div[data-group-uri='"+d+"'] .icons")[0],this.groupContainers[d]=c)):c=this.getItemViewContainer(a)[0],c.appendChild(b.el)},j.prototype.onSelected=function(a,b){var c,e,f,h,i,j,k,l,m,n;if(j=b.selected,j.length){for(k=[],e=[],n=function(){var a,b,c;for(c=[],a=0,b=j.length;b>a;a++)i=j[a],c.push(d(i).find(".icon"));return c}(),l=0,m=n.length;m>l;l++)c=n[l],h=Number(c.attr("data-id")),f=this.collection.findWhere({id:h}),c.hasClass("selected")?k.push(f):e.push(f);return k.reverse(),e.reverse(),g.fonts.getCurrent().related.glyphs.addAndDelete({selectedIcons:k,deselectedIcons:e})}},j.prototype.onSelecting=function(a,b){var c;return c=b.selecting||b.unselecting,d(c).find(".icon").toggleClass("selected")},j.prototype.closeLibraryToggle=function(a){var b;return a.preventDefault(),b=!this.model.get("is_closed"),this.ui.closeLibraryToggle.toggleClass("closed"),this.ui.iconsList.toggleClass("closed"),this.model.save({is_closed:b},{silent:!0})},j.prototype.updateIconCounter=function(){return this.ui.iconCounter.text(this.model.related.icons.length)},j.prototype.markIconsAsSelected=function(a){var b,c,d,e,f,g;for(c=a[0],g=[],d=0,e=c.length;e>d;d++)b=c[d],g.push(null!=(f=this.children.findByModel(b))?f.ui.icon.addClass("selected"):void 0);return g},j.prototype.applyFilter=function(a){var c,d,e,f,g,h,i,j,k;if(a.length){for(this.$el.show(),this.$el.find(".icon").parent().hide(),this.groupContainers&&this.$el.find(".icon-group").hide(),d=b.uniq(function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)e=a[b],d.push(e.get("group"));return d}()),f=0,h=d.length;h>f;f++)c=d[f],this.$("div[data-group-uri='"+c+"']").show();this.ui.iconCounter.hide(),this.ui.foundIconsCounter.text(a.length),this.ui.foundIconsCounter.css("display","inline-block")}else this.$el.hide();for(k=[],g=0,i=a.length;i>g;g++)e=a[g],k.push(null!=(j=this.children.findByModel(e))?j.$el.show():void 0);return k},j.prototype.resetFilter=function(){return this.ui.iconCounter.css("display","inline-block"),this.ui.foundIconsCounter.hide(),this.$el.find(".icon").parent().show(),this.$el.find(".icon-group").show(),this.$el.show()},j}(e.Marionette.CompositeView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/alert_view",["backbone_all"],function(a){var c,d;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments)}return b(e,c),e.prototype.template="alert",e.prototype.className="modal hide fade",e.prototype.events={hidden:"onHidden"},e.prototype.initialize=function(b){return this.model=new a.Model({header:b.header,body:b.body}),this.render()},e.prototype.onRender=function(){return this.$el.modal()},e.prototype.onHidden=function(){return this.close()},e}(a.Marionette.ItemView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/uploading_dialog_view",["jquery","backbone_all","app"],function(b,d,e){var f,g;return f=function(d){function f(){return this.activeDoneState=a(this.activeDoneState,this),this.updateIconCounter=a(this.updateIconCounter,this),g=f.__super__.constructor.apply(this,arguments)}return c(f,d),f.prototype.template="uploading_dialog",f.prototype.className="uploading modal hide fade",f.prototype.events={"click .cancel":"onCancel",hidden:"onHidden"},f.prototype.ui={progressBar:".uploading-progress .inner",currentFileNumber:".current-file-number",successFileNumber:".success-file-number",errorFileNumber:".error-file-number",lastFileNumber:".last-file-number"},f.prototype.initialize=function(a){return this.icons=a.icons,this.oldIconsLength=this.icons.length,this.lastFileNumber=a.lastFileNumber,this.listenTo(this.icons,"add",this.updateIconCounter),this.listenTo(e.vent,"uploading:done",this.activeDoneState),this.listenTo(e.vent,"uploading:filesNumber:changed",this.updateLastFileNumber),this.render()},f.prototype.onRender=function(){return this.$el.modal({backdrop:"static"}),this.ui.lastFileNumber.text(this.lastFileNumber)},f.prototype.onCancel=function(a){return a.preventDefault(),this.$el.modal("hide").one("hidden",b.xhrPool.abortAll),this.icons.sort()},f.prototype.onHidden=function(){return this.remove()},f.prototype.updateIconCounter=function(){var a,b;return a=this.icons.length-this.oldIconsLength,this.ui.currentFileNumber.text(a),b=100*(a/this.lastFileNumber),this.ui.progressBar.width(""+b+"%")},f.prototype.activeDoneState=function(){var a,b;return a=this.icons.length-this.oldIconsLength,b=this.lastFileNumber-a,this.ui.successFileNumber.text(a),this.$el.addClass("done"),this.icons.sort(),0!==b?(this.ui.errorFileNumber.text(b),this.$el.addClass("error")):void 0},f.prototype.updateLastFileNumber=function(a){return this.lastFileNumber=a,this.ui.lastFileNumber.text(this.lastFileNumber)},f}(d.Marionette.ItemView)})}.call(this),function(){define("utils/upload_icons",["underscore","jquery","utils/svg","app","utils/helpers","views/alert_view","views/uploading_dialog_view"],function(a,b,c,d,e,f,g){var h,i;return i=function(b,f,h){var i,j,k,l,m,n,o;for(j=f.get("resource_uri"),k=b.length,new g({lastFileNumber:b.length,icons:f.related.icons}),o=[],m=0,n=b.length;n>m;m++)i=b[m],l=new FileReader,l.onload=function(b){return function(g){var i,l,m,n,o,p,q;for(l=c.extractIcons(g.target.result),1!==l.length&&(k=k-1+l.length,d.vent.trigger("uploading:filesNumber:changed",k)),q=[],o=0,p=l.length;p>o;o++)i=l[o],n=e.slugify(b.name.split(".")[0]),m={name:n,tags:[n],svg:i,library:j},m=a.extend(m,h),q.push(f.related.icons.create(m,{sort:!1,wait:!0,complete:function(){return k-=1,0===k?d.vent.trigger("uploading:done"):void 0}}));return q}}(i),o.push(l.readAsText(i));return o},h=function(a,c,e){var g,h,j;if(null==e&&(e={}),"drop"===a.type)j=a.originalEvent.dataTransfer.files;else if(j=a.target.files,g=b(a.target),!g.val())return;return j=function(){var a,b,c;for(c=[],a=0,b=j.length;b>a;a++)h=j[a],h.type.match("image.svg")&&c.push(h);return c}(),j.length?c?(i(j,c,e),null!=g?g.val(""):void 0):(b("body").scrollTop(0),c=d.libraries.create({},{at:0}),c.saveDeferred.done(function(){return d.allLibraries.add(c),i(j,c,e),null!=g?g.val(""):void 0})):(new f({body:"Please select at least one SVG icon or SVG font to import."}),null!=g&&g.val(""),void 0)}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/library_form_view",["backbone_all","views/form_view"],function(a,c){var d,e;return d=function(a){function c(){return e=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="library_form",c}(c)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/personal_library_view",["underscore","utils/upload_icons","app","views/personal_icon_view","views/dialog_view","views/library_view","views/library_form_view"],function(b,d,e,f,g,h,i){var j,k;return j=function(j){function l(){return this.onUpload=a(this.onUpload,this),this.triggerFileInput=a(this.triggerFileInput,this),k=l.__super__.constructor.apply(this,arguments)}return c(l,j),l.prototype.template="personal_library",l.prototype.itemView=f,l.prototype.events=b.extend(h.prototype.events,{"click .add-icons":"triggerFileInput","change .add-icons-input":"onUpload","click .delete-library":"onDeleteLibrary","click .edit":"showLibraryForm"}),l.prototype.collectionEvents={"add remove":"updateIconCounter",sort:"render"},l.prototype.onDeleteLibrary=function(a){var b=this;return a.preventDefault(),new g({header:"Confirm deleting",body:"Are you sure you want to delete your collection?",submitText:"Delete collection",callback:function(){return b.deleteLibrary()}})},l.prototype.deleteLibrary=function(){var a,b,c,d,f,g,h,i,j,k,l,m;for(d=this.model.related.icons.pluck("resource_uri"),l=e.fonts.models,f=0,i=l.length;i>f;f++)for(a=l[f],g=0,j=d.length;j>g;g++)for(c=d[g],m=a.related.glyphs.where({icon:c}),h=0,k=m.length;k>h;h++)b=m[h],b.collection.remove(b);return this.model.destroy()},l.prototype.showLibraryForm=function(a){return a.preventDefault(),new i({model:this.model})},l.prototype.triggerFileInput=function(a){return a.preventDefault(),this.$el.find(".add-icons-input").trigger("click")},l.prototype.onUpload=function(a){return d(a,this.model)},l}(h)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/libraries_view",["jquery","backbone_all","app","views/empty_view","views/library_view","views/personal_library_view","utils/upload_icons"],function(b,d,e,f,g,h,i){var j,k;return j=function(d){function j(){return this.triggerFileInput=a(this.triggerFileInput,this),this.drop=a(this.drop,this),this.dragEnd=a(this.dragEnd,this),this.dragLeave=a(this.dragLeave,this),this.dragEnter=a(this.dragEnter,this),k=j.__super__.constructor.apply(this,arguments)}return c(j,d),j.prototype.template="libraries",j.prototype.itemViewContainer=".libraries",j.prototype.emptyView=f({message:"There're no icons."}),j.prototype.ui={addIconsBlock:".import-icons-block",filterInfoWrap:".filter-info-wrap",filterInfo:".filter-info"},j.prototype.events={"change .import-icons-input":i,"click .import-icons-block":"triggerFileInput","dragover .import-icons-block":"dragOver","dragenter .import-icons-block":"dragEnter","dragleave .import-icons-block":"dragLeave","dragend .import-icons-block":"dragEnd","drop .import-icons-block":"drop","click .filter-reset":function(a){return a.preventDefault(),e.vent.trigger("iconFilter:reset")}},j.prototype.initialize=function(){return this.listenTo(e.vent,"iconFilter:apply",this.applyFilter),this.listenTo(e.vent,"iconFilter:reset",this.resetFilter)},j.prototype.itemView=function(a){return a.model.isPersonal()?new h(a):new g(a)},j.prototype.appendHtml=function(a,b,c){var d;return d=this.getItemViewContainer(a),0===c?d.prepend(b.el):d.append(b.el)},j.prototype.dragOver=function(a){return a.preventDefault()},j.prototype.dragEnter=function(a){return null==this.$enteredChildren&&(this.$enteredChildren=b()),a.originalEvent.dataTransfer.dropEffect="copy",0===this.$enteredChildren.size()&&this.ui.addIconsBlock.addClass("drag-over"),this.$enteredChildren=this.$enteredChildren.add(a.target)},j.prototype.dragLeave=function(a){return null==this.$enteredChildren&&(this.$enteredChildren=b()),this.$enteredChildren=this.$enteredChildren.not(a.target),0===this.$enteredChildren.size()?this.ui.addIconsBlock.removeClass("drag-over"):void 0},j.prototype.dragEnd=function(){return this.ui.addIconsBlock.removeClass("drag-over"),this.$enteredChildren=b()},j.prototype.drop=function(a){return a.stopPropagation(),a.preventDefault(),i(a),this.dragEnd()},j.prototype.applyFilter=function(a){var b,c;return b=0,this.children.each(function(c){var d;return d=c.collection.where({tags__startswith:a}),d.length&&(b+=d.length),c.applyFilter(d)}),c=b>0?1===b?"1 icon was found":""+b+" icons were found":"Can't find any icons matching '"+a+"'",this.showFilterInfo(c)},j.prototype.resetFilter=function(){return this.hideFilterInfo(),this.children.each(function(a){return a.resetFilter()})},j.prototype.showFilterInfo=function(a){return this.ui.filterInfo.text(a),this.ui.filterInfoWrap.show()},j.prototype.hideFilterInfo=function(){return this.ui.filterInfoWrap.hide()},j.prototype.triggerFileInput=function(a){return a.preventDefault(),this.$el.find(".import-icons-input").trigger("click")},j}(d.Marionette.CompositeView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/admin_library_form_view",["views/form_view"],function(a){var c,d;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="admin_library_form",c}(a)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/admin_library_view",["underscore","jquery","utils/upload_icons","views/personal_library_view","views/admin_library_form_view"],function(b,d,e,f,g){var h,i;return h=function(h){function j(){return this.drop=a(this.drop,this),this.dragEnd=a(this.dragEnd,this),this.dragLeave=a(this.dragLeave,this),this.dragEnter=a(this.dragEnter,this),this.dragStart=a(this.dragStart,this),this.dragHandleOff=a(this.dragHandleOff,this),this.dragHandleOn=a(this.dragHandleOn,this),this.addIconsToGroup=a(this.addIconsToGroup,this),this.triggerAddIconsToGroup=a(this.triggerAddIconsToGroup,this),i=j.__super__.constructor.apply(this,arguments)}return c(j,h),j.prototype.template="admin_library",j.prototype.events=b.extend(f.prototype.events,{"click .add-icons-to-group":"triggerAddIconsToGroup","change .add-icons-to-group-input":"addIconsToGroup","mousedown .drag-handle":"dragHandleOn","mouseup .drag-handle":"dragHandleOff",dragstart:"dragStart",dragenter:"dragEnter",dragleave:"dragLeave",dragend:"dragEnd",dragover:"dragOver",drop:"drop"}),j.prototype.showLibraryForm=function(a){return a.preventDefault(),new g({model:this.model})},j.prototype.triggerAddIconsToGroup=function(a){var b;return a.preventDefault(),b=d(a.target),b.parent().parent().find(".add-icons-to-group-input").trigger("click")},j.prototype.addIconsToGroup=function(a){var b,c;return b=d(a.target),c=b.parent().parent().parent().data("group-uri"),e(a,this.model,{group:c})},j.prototype.dragHandleOn=function(){return this.isHandle=!0},j.prototype.dragHandleOff=function(){return this.isHandle=!1},j.prototype.dragStart=function(a){var b;return this.isHandle?(b=a.originalEvent.dataTransfer,b.effectAllowed="move",b.dropEffect="move",b.setData("Text","dummy"),this.isHandle=!1,this.model.collection.draggedModel=this.model,!0):!1},j.prototype.dragOver=function(a){return a.preventDefault()},j.prototype.dragEnter=function(a){return null==this.$enteredChildren&&(this.$enteredChildren=d()),0===this.$enteredChildren.size()&&this.$el.addClass("drag-over"),this.$enteredChildren=this.$enteredChildren.add(a.target)},j.prototype.dragLeave=function(a){return null==this.$enteredChildren&&(this.$enteredChildren=d()),this.$enteredChildren=this.$enteredChildren.not(a.target),0===this.$enteredChildren.size()?this.$el.removeClass("drag-over"):void 0},j.prototype.dragEnd=function(){return this.$el.removeClass("drag-over"),this.$enteredChildren=d()},j.prototype.drop=function(a){var b,c,d,e,f,g,h;if(a.stopPropagation(),a.preventDefault(),this.dragEnd(),b=this.model.collection,c=b.draggedModel,b.draggedModel=void 0,!c||c===this.model)return!1;for(b.models.splice(b.indexOf(c),1),b.models.splice(this.$el.index(),0,c),h=b.models,d=f=0,g=h.length;g>f;d=++f)e=h[d],e.save("position",d+1);return b.trigger("reset")},j}(f)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/admin_libraries_view",["backbone_all","views/libraries_view","views/admin_library_view"],function(a,c,d){var e,f;return e=function(a){function c(){return f=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.itemView=d,c}(c)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/glyphs_view",["underscore","backbone_all","utils/svg","app","utils/helpers"],function(a,c,d,e,f){var g,h,i,j;return g=function(a){function c(){return i=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="glyph",c.prototype.tagName="li",c.prototype.ui={codeInput:"input"},c.prototype.events={"focus input":"onFocus","blur input":"changeCode","keypress input":"onKeyPress","click .delete":"deleteGlyph"},c.prototype.serializeData=function(){var a;return a=c.__super__.serializeData.call(this),a.svg=this.model.getSVG(e.libraries.models)||"ICON",a.codeInputValue=this.model.getCodeInputValue(),a},c.prototype.onFocus=function(a){var b;return this.$(a.target).one("mouseup",function(a){return a.preventDefault()}),b=this.ui.codeInput.val(),this.ui.codeInput.val(b.replace(/^U\+0*/g,"")),a.target.select()},c.prototype.onKeyPress=function(a){return 13===a.keyCode?a.target.blur():void 0},c.prototype.changeCode=function(){var a,b,c,d,e;return c=this.ui.codeInput.val(),e=this.model.get("code"),d=this.model.parseInputCode(c),d!==e&&(b=this.model.changeCode(c),a=this.model.get("code"),this.ui.codeInput.val(this.model.getCodeInputValue()),"done"!==b)?"not unique"===b?this.showInputError(this.ui.codeInput,'"'+c+'" is already in use'):this.showInputError(this.ui.codeInput,"wrong input"):void 0},c.prototype.showInputError=function(a,b,c){return null==c&&(c=3e3),a.tooltip({title:b,placement:"right",trigger:"manual"}),a.addClass("error"),a.tooltip("show"),f.after(c,function(){return a.tooltip("destroy"),a.removeClass("error")})},c.prototype.deleteGlyph=function(a){return a.preventDefault(),this.model.destroy(),e.vent.trigger("currentFont:glyphRemoved")},c}(c.Marionette.ItemView),h=function(a){function c(){return j=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="ul",c.prototype.className="glyphs",c.prototype.itemView=g,c}(c.Marionette.CollectionView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/glyphs_css_view",["underscore","backbone_all","utils/svg","utils/helpers","app"],function(a,c,d,e,f){var g,h,i,j;return g=function(a){function c(){return i=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="glyph_css",c.prototype.tagName="li",c.prototype.ui={classNameInput:"input"},c.prototype.events={"focus input":"onFocus","blur input":"changeClassName","keypress input":"onKeyPress"},c.prototype.serializeData=function(){var a;return a=c.__super__.serializeData.call(this),a.svg=this.model.getSVG(f.libraries.models)||"ICON",a},c.prototype.onFocus=function(a){return this.$(a.target).one("mouseup",function(a){return a.preventDefault()}),a.target.select()},c.prototype.onKeyPress=function(a){return 13===a.keyCode?(this.changeClassName(),a.target.blur()):void 0},c.prototype.changeClassName=function(){var a,b;return b=e.slugify(this.ui.classNameInput.val()),a=this.model.get("css_class"),b&&b!==a&&this.model.changeClassName(b),this.ui.classNameInput.val(this.model.get("css_class"))},c}(c.Marionette.ItemView),h=function(a){function c(){return j=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="ul",c.prototype.className="glyphs-css",c.prototype.itemView=g,c}(c.Marionette.CollectionView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/customize_layout",["backbone_all","jquery","app","views/glyphs_view","views/glyphs_css_view"],function(a,c,d,e,f){var g,h;return g=function(a){function g(){return h=g.__super__.constructor.apply(this,arguments)}return b(g,a),g.prototype.template="customize_layout",g.prototype.regions={glyphsRegion:".glyphs-region",glyphsCSSRegion:".glyphs-css-region"},g.prototype.events={"click .reset-code-mapping":"resetCodes"},g.prototype.initialize=function(){return this.listenTo(d.vent,"currentFont:changed",this.onRender),this.listenTo(d.vent,"currentFont:resetCodes",this.onRender),this.listenTo(d.vent,"currentFont:resetIconSelection",this.onRender)},g.prototype.onRender=function(){var a;return a=d.fonts.getCurrent().related.glyphs,this.glyphsRegion.show(new e({collection:a})),this.glyphsCSSRegion.show(new f({collection:a}))},g.prototype.resetCodes=function(a){var b;return a.preventDefault(),b="pua"===c(a.target).attr("id"),d.fonts.getCurrent().resetCodes(b),d.vent.trigger("currentFont:resetCodes")},g}(a.Marionette.Layout)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/account_view",["jquery","backbone_all","views/dialog_view"],function(a,c,d){var e,f;return e=function(c){function e(){return f=e.__super__.constructor.apply(this,arguments)}return b(e,c),e.prototype.template="account",e.prototype.events={"click #delete-account":"onDeleteAccount"},e.prototype.onDeleteAccount=function(b){var c;return b.preventDefault(),c=a(b.target).attr("href"),new d({header:"Confirm deleting",body:"Are you sure you want to delete your account?",submitText:"Delete my account",callback:function(){return window.location=c}})},e}(c.Marionette.ItemView)})}.call(this),define("highlight",[],function(){var a=new function(){function b(a){return a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function c(a){for(var b=a.firstChild;b;b=b.nextSibling){if("CODE"==b.nodeName)return b;if(3!=b.nodeType||!b.nodeValue.match(/\s+/))break}}function d(a,b){return Array.prototype.map.call(a.childNodes,function(a){return 3==a.nodeType?b?a.nodeValue.replace(/\n/g,""):a.nodeValue:"BR"==a.nodeName?"\n":d(a,b)}).join("")}function e(a){var b=(a.className+" "+(a.parentNode?a.parentNode.className:"")).split(/\s+/);b=b.map(function(a){return a.replace(/^language-/,"")});for(var c=0;c<b.length;c++)if(o[b[c]]||"no-highlight"==b[c])return b[c]}function f(a){var b=[];return function c(a,d){for(var e=a.firstChild;e;e=e.nextSibling)3==e.nodeType?d+=e.nodeValue.length:"BR"==e.nodeName?d+=1:1==e.nodeType&&(b.push({event:"start",offset:d,node:e}),d=c(e,d),b.push({event:"stop",offset:d,node:e}));return d}(a,0),b}function g(a,c,d){function e(){return a.length&&c.length?a[0].offset!=c[0].offset?a[0].offset<c[0].offset?a:c:"start"==c[0].event?a:c:a.length?a:c}function f(a){function c(a){return" "+a.nodeName+'="'+b(a.value)+'"'}return"<"+a.nodeName+Array.prototype.map.call(a.attributes,c).join("")+">"}for(var g=0,h="",i=[];a.length||c.length;){var j=e().splice(0,1)[0];if(h+=b(d.substr(g,j.offset-g)),g=j.offset,"start"==j.event)h+=f(j.node),i.push(j.node);else if("stop"==j.event){var k,l=i.length;do l--,k=i[l],h+="</"+k.nodeName.toLowerCase()+">";while(k!=j.node);for(i.splice(l,1);l<i.length;)h+=f(i[l]),l++}}return h+b(d.substr(g))}function h(b){function c(a){return a&&a.source||a}function d(a,d){return RegExp(c(a),"m"+(b.cI?"i":"")+(d?"g":""))}function e(b,f){function g(a,b){b.split(" ").forEach(function(b){var c=b.split("|");i[c[0]]=[a,c[1]?Number(c[1]):1],h.push(c[0])})}if(!b.compiled){b.compiled=!0;var h=[];if(b.k){var i={};if(b.lR=d(b.l||a.IR+"(?!\\.)",!0),"string"==typeof b.k)g("keyword",b.k);else for(var j in b.k)b.k.hasOwnProperty(j)&&g(j,b.k[j]);b.k=i}f&&(b.bWK&&(b.b="\\b("+h.join("|")+")\\b(?!\\.)\\s*"),b.bR=d(b.b?b.b:"\\B|\\b"),b.e||b.eW||(b.e="\\B|\\b"),b.e&&(b.eR=d(b.e)),b.tE=c(b.e)||"",b.eW&&f.tE&&(b.tE+=(b.e?"|":"")+f.tE)),b.i&&(b.iR=d(b.i)),void 0===b.r&&(b.r=1),b.c||(b.c=[]);for(var k=0;k<b.c.length;k++)"self"==b.c[k]&&(b.c[k]=b),e(b.c[k],b);b.starts&&e(b.starts,f);for(var l=[],k=0;k<b.c.length;k++)l.push(c(b.c[k].b));b.tE&&l.push(c(b.tE)),b.i&&l.push(c(b.i)),b.t=l.length?d(l.join("|"),!0):{exec:function(){return null}}}}e(b)}function i(a,c,d){function e(a,b){for(var c=0;c<b.c.length;c++){var d=b.c[c].bR.exec(a);if(d&&0==d.index)return b.c[c]}}function f(a,b){return a.e&&a.eR.test(b)?a:a.eW?f(a.parent,b):void 0}function g(a,b){return!d&&b.i&&b.iR.test(a)}function k(a,b){var c=r.cI?b[0].toLowerCase():b[0];return a.k.hasOwnProperty(c)&&a.k[c]}function l(){var a=b(t);if(!s.k)return a;var c="",d=0;s.lR.lastIndex=0;for(var e=s.lR.exec(a);e;){c+=a.substr(d,e.index-d);var f=k(s,e);f?(v+=f[1],c+='<span class="'+f[0]+'">'+e[0]+"</span>"):c+=e[0],d=s.lR.lastIndex,e=s.lR.exec(a)}return c+a.substr(d)}function m(){if(s.sL&&!o[s.sL])return b(t);var a=s.sL?i(s.sL,t):j(t);return s.r>0&&(v+=a.keyword_count,u+=a.r),'<span class="'+a.language+'">'+a.value+"</span>"}function n(){return void 0!==s.sL?m():l()}function p(a,c){var d=a.cN?'<span class="'+a.cN+'">':"";a.rB?(w+=d,t=""):a.eB?(w+=b(c)+d,t=""):(w+=d,t=c),s=Object.create(a,{parent:{value:s}})}function q(a,c){if(t+=a,void 0===c)return w+=n(),0;var d=e(c,s);if(d)return w+=n(),p(d,c),d.rB?0:c.length;var h=f(s,c);if(h){var i=s;i.rE||i.eE||(t+=c),w+=n();do s.cN&&(w+="</span>"),u+=s.r,s=s.parent;while(s!=h.parent);return i.eE&&(w+=b(c)),t="",h.starts&&p(h.starts,""),i.rE?0:c.length}if(g(c,s))throw new Error('Illegal lexem "'+c+'" for mode "'+(s.cN||"<unnamed>")+'"');return t+=c,c.length||1}var r=o[a];h(r);var s=r,t="",u=0,v=0,w="";try{for(var x,y,z=0;;){if(s.t.lastIndex=z,x=s.t.exec(c),!x)break;y=q(c.substr(z,x.index-z),x[0]),z=x.index+y}return q(c.substr(z)),{r:u,keyword_count:v,value:w,language:a}}catch(A){if(-1!=A.message.indexOf("Illegal"))return{r:0,keyword_count:0,value:b(c)};throw A}}function j(a){var c={keyword_count:0,r:0,value:b(a)},d=c;
for(var e in o)if(o.hasOwnProperty(e)){var f=i(e,a,!1);f.language=e,f.keyword_count+f.r>d.keyword_count+d.r&&(d=f),f.keyword_count+f.r>c.keyword_count+c.r&&(d=c,c=f)}return d.language&&(c.second_best=d),c}function k(a,b,c){return b&&(a=a.replace(/^((<[^>]+>|\t)+)/gm,function(a,c){return c.replace(/\t/g,b)})),c&&(a=a.replace(/\n/g,"<br>")),a}function l(a,b,c){var h=d(a,c),l=e(a);if("no-highlight"!=l){var m=l?i(l,h,!0):j(h);l=m.language;var n=f(a);if(n.length){var o=document.createElement("pre");o.innerHTML=m.value,m.value=g(n,f(o),h)}m.value=k(m.value,b,c);var p=a.className;p.match("(\\s|^)(language-)?"+l+"(\\s|$)")||(p=p?p+" "+l:l),a.innerHTML=m.value,a.className=p,a.result={language:l,kw:m.keyword_count,re:m.r},m.second_best&&(a.second_best={language:m.second_best.language,kw:m.second_best.keyword_count,re:m.second_best.r})}}function m(){m.called||(m.called=!0,Array.prototype.map.call(document.getElementsByTagName("pre"),c).filter(Boolean).forEach(function(b){l(b,a.tabReplace)}))}function n(){window.addEventListener("DOMContentLoaded",m,!1),window.addEventListener("load",m,!1)}var o={};this.LANGUAGES=o,this.highlight=i,this.highlightAuto=j,this.fixMarkup=k,this.highlightBlock=l,this.initHighlighting=m,this.initHighlightingOnLoad=n,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\[\\s\\S]",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0},this.CLCM={cN:"comment",b:"//",e:"$"},this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"},this.HCM={cN:"comment",b:"#",e:"$"},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.REGEXP_MODE={cN:"regexp",b:/\//,e:/\/[gim]*/,i:/\n/,c:[this.BE,{b:/\[/,e:/\]/,r:0,c:[this.BE]}]},this.inherit=function(a,b){var c={};for(var d in a)c[d]=a[d];if(b)for(var d in b)c[d]=b[d];return c}};return a.LANGUAGES.css=function(a){var b="[a-zA-Z-][a-zA-Z0-9_-]*",c={cN:"function",b:b+"\\(",e:"\\)",c:["self",a.NM,a.ASM,a.QSM]};return{cI:!0,i:"[=/|']",c:[a.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[c,a.ASM,a.QSM,a.NM]}]},{cN:"tag",b:b,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[a.CBLCLM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[c,a.NM,a.QSM,a.ASM,a.CBLCLM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]}]}]}}(a),a}),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/css_code_view",["underscore","backbone_all","highlight","app"],function(a,c,d,e){var f,g;return f=function(c){function f(){return g=f.__super__.constructor.apply(this,arguments)}return b(f,c),f.prototype.template="css_code",f.prototype.tagName="code",f.prototype.events={click:"selectCode"},f.prototype.modelEvents={"change:name":"render","change:css_class_prefix":"render"},f.prototype.initialize=function(){return this.listenTo(e.router,"route:download",this.render)},f.prototype.onRender=function(){return d.highlightBlock(this.el)},f.prototype.selectCode=function(){return this.$el.selectText()},f.prototype.serializeData=function(){var b,c,d,e,g,h;for(b=f.__super__.serializeData.call(this),b.glyphs=this.model.related.glyphs.map(function(b){return a.clone(b.attributes)}),g=b.glyphs,d=0,e=g.length;e>d;d++)c=g[d],c.code=33<=(h=c.code)&&126>=h?String.fromCharCode(c.code):"\\"+c.code.toString(16);return b},f}(c.Marionette.ItemView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/reference_view",["underscore","backbone_all","utils/svg","app"],function(a,c,d,e){var f,g,h,i;return f=function(a){function c(){return h=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="reference_item",c.prototype.tagName="li",c.prototype.ui={input:"input"},c.prototype.events={"focus input":"onFocus"},c.prototype.serializeData=function(){var a,b;return b=c.__super__.serializeData.call(this),b.svg=this.model.getSVG(e.libraries.models)||"ICON",a=b.code,a=a>=33&&126>=a?String.fromCharCode(a):"&#x"+a.toString(16)+";",b.dataIcon=34!==b.code?'data-icon="'+a+'"':"data-icon='"+a+"'",b.css_class_prefix=e.fonts.getCurrent().get("css_class_prefix"),b},c.prototype.onFocus=function(a){return this.$(a.target).one("mouseup",function(a){return a.preventDefault()}),a.target.select()},c}(c.Marionette.ItemView),g=function(a){function c(){return i=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="reference",c.prototype.itemView=f,c.prototype.itemViewContainer=".icons-reference",c.prototype.modelEvents={"change:css_class_prefix":"render"},c}(c.Marionette.CompositeView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/download_button_view",["jquery","backbone_all","app"],function(b,d,e){var f,g;return f=function(d){function f(){return this.downloadFont=a(this.downloadFont,this),g=f.__super__.constructor.apply(this,arguments)}return c(f,d),f.prototype.template="download_button",f.prototype.events={"click .download-button":"downloadFont"},f.prototype.ui={counter:".counter",downloadButton:".download-button"},f.prototype.initialize=function(){return this.model=e.fonts.getCurrent(),this.listenTo(this.model.related.glyphs,"add remove reset",this.updateCounter)},f.prototype.onRender=function(){return this.updateCounter()},f.prototype.updateCounter=function(){var a;return a=this.model.related.glyphs.length,this.ui.counter.text(a),0===a?this.$el.addClass("not-ready"):this.$el.removeClass("not-ready")},f.prototype.downloadFont=function(a){var c=this;return a.preventDefault(),this.$el.hasClass("not-ready")?void 0:(this.ui.downloadButton.addClass("processing"),this.model.related.glyphs.syncDeferred.done(function(){var a;return a=b.fileDownload("/download/font/"+c.model.attributes.uuid),a.done(function(){return c.ui.downloadButton.removeClass("processing")}),a.fail(function(){return c.ui.downloadButton.removeClass("processing"),alert("Download timeout. We are sorry, please try again.")})}))},f}(d.Marionette.ItemView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/download_view",["jquery","backbone_all","app","views/css_code_view","views/reference_view","views/download_button_view"],function(a,c,d,e,f,g){var h,i;return h=function(c){function h(){return i=h.__super__.constructor.apply(this,arguments)}return b(h,c),h.prototype.template="download",h.prototype.className="download-view",h.prototype.regions={cssCodeRegion:"pre",referenceRegion:".icons-reference-wrap",downloadButtonRegion:".download-button-region"},h.prototype.ui={tabs:".tab-pills a",steps:".steps"},h.prototype.events={"click .tab-pills a":"toggleMappingMethod"},h.prototype.initialize=function(){return this.listenTo(d.vent,"currentFont:changed",this.onRender)},h.prototype.onRender=function(){var a,b,c;return b=d.fonts.getCurrent(),this.downloadButtonRegion.show(new g),c=new f({model:b,collection:b.related.glyphs}),this.referenceRegion.show(c),a=new e({model:d.fonts.getCurrent()}),this.cssCodeRegion.show(a),this.ui.tabs.first().trigger("click")},h.prototype.toggleMappingMethod=function(b){var c;return b.preventDefault(),c=a(b.target),this.ui.tabs.removeClass("selected"),this.ui.steps.hide(),this.el.className=this.el.className.replace(/\b ?[^ ]*-mapping\b/g,""),this.$el.addClass(c.data("mapping-method")),c.addClass("selected"),this.ui.steps.fadeIn()},h}(c.Marionette.Layout)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};define("views/libraries_management_view",["backbone_all","app","views/empty_view","utils/upload_icons"],function(a,d,e,f){var g,h,i,j,k,l;return h=function(a){function c(){return j=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="premium_library",c.prototype.tagName="li",c.prototype.bindings={".discount-price":{observe:"discount_expires_in",visible:!0},".regular-price":{observe:"discount_expires_in",visible:function(a){return!a}}},c.prototype.onRender=function(){return this.stickit()},c.prototype.serializeData=function(){var a,b;return a=c.__super__.serializeData.call(this),b=this.model.getDiscountPrice(),b&&(a.discountPrice=b),a},c}(a.Marionette.ItemView),i=function(a){function e(){return this.deactivateLibrary=c(this.deactivateLibrary,this),this.activateLibrary=c(this.activateLibrary,this),k=e.__super__.constructor.apply(this,arguments)}return b(e,a),e.prototype.template="libraries_management_item",e.prototype.tagName="li",e.prototype.events={"click .activate":"activateLibrary","click .deactivate":"deactivateLibrary"},e.prototype.modelEvents={change:"updateLibraryState"},e.prototype.ui={iconCounter:".icon-counter"},e.prototype.initialize=function(){return this.listenTo(this.model.related.icons,"add remove",this.updateIconCounter)},e.prototype.onRender=function(){return this.updateLibraryState(),this.updateIconCounter()},e.prototype.serializeData=function(){var a;return a=e.__super__.serializeData.call(this),a.isPremium=this.model.isPremium(),a},e.prototype.updateLibraryState=function(){return this.model.get("is_hidden")?this.$el.removeClass("active"):this.$el.addClass("active")},e.prototype.updateIconCounter=function(){return this.ui.iconCounter.text(this.model.iconsCounter())},e.prototype.activateLibrary=function(a){return a.preventDefault(),this.model.save({is_hidden:!1}),this.model.relatedFetched()||this.model.fetchRelated(),d.libraries.add(this.model)},e.prototype.deactivateLibrary=function(a){return a.preventDefault(),this.model.save({is_hidden:!0}),d.libraries.remove(this.model)},e}(a.Marionette.ItemView),g=function(a){function d(){return this.triggerFileInput=c(this.triggerFileInput,this),l=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.template="libraries_management",d.prototype.itemViewContainer=".libraries-to-manage",d.prototype.emptyView=e({message:"There are no collections yet."}),d.prototype.events={"change .import-icons-input":f,"click .import-icons":"triggerFileInput"},d.prototype.collectionEvents={"add remove sort":"render"},d.prototype.onRender=function(){return 0},d.prototype.itemView=function(a){var b;return("function"==typeof(b=a.model).isPremiumLibrary?b.isPremiumLibrary():void 0)?new h(a):new i(a)},d.prototype.triggerFileInput=function(a){return a.preventDefault(),this.$el.find(".import-icons-input").trigger("click")},d}(a.Marionette.CompositeView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/library_preview_view",["backbone_all","jquery","libs/vaguetime"],function(b,d,e){var f,g;return f=function(b){function f(){return this.updatePaymentURL=a(this.updatePaymentURL,this),g=f.__super__.constructor.apply(this,arguments)}return c(f,b),f.prototype.template="library_preview",f.prototype.events={"change .price-selection input":"updatePaymentURL"},f.prototype.ui={labels:".price-selection label",buyButton:".btn-primary",discountExpiration:".discount-expiration"},f.prototype.bindings={".discount-expiration":{observe:"discount_expires_in",onGet:function(a){return a?e.get({from:0,to:a,units:"s"}):void 0}},".discount-price":{observe:"discount_expires_in",visible:!0},".regular-price":{observe:"discount_expires_in",visible:function(a){return!a}}},f.prototype.serializeData=function(){var a,b;return a=f.__super__.serializeData.call(this),b=this.model.getDiscountPrice(),b&&(a.discountPrice=b),a},f.prototype.onRender=function(){return this.stickit()},f.prototype.updatePaymentURL=function(a){var b,c,e;return b=d(a.target),e="attachment"===b.val(),this.ui.labels.removeClass("checked"),b.parent().addClass("checked"),c=this.ui.buyButton.attr("href").split("?")[0],e&&(c=""+c+"?attachment=true"),this.ui.buyButton.attr("href",c)},f}(b.Marionette.ItemView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/tags_view",["underscore","backbone_all","utils/svg","utils/helpers"],function(a,c,d,e){var f,g,h,i,j,k;return f=function(c){function d(){return i=d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.template="tags_icon",d.prototype.tagName="li",d.prototype.ui={tagsInput:"input"},d.prototype.events={"blur input":"updateTags","keypress input":"onKeyPress"},d.prototype.serializeData=function(){var a;return a=d.__super__.serializeData.call(this),a.tags=this.model.get("tags").join(","),a},d.prototype.onKeyPress=function(a){return 13===a.keyCode?(this.updateTags(),a.target.blur()):void 0},d.prototype.updateTags=function(){var b,c,d,f;return d=this.ui.tagsInput.val(),c=a.compact(function(){var a,b,c,g;for(c=d.split(","),g=[],a=0,b=c.length;b>a;a++)f=c[a],g.push(e.slugify(f));return g}()),b=this.model.get("tags"),d=c.join(""),d&&d!==b.join("")&&this.model.save({tags:c}),this.ui.tagsInput.val(c.join(","))},d}(c.Marionette.ItemView),g=function(a){function c(){return j=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="li",c.prototype.itemViewContainer=".icons",c.prototype.template="tags_item",c.prototype.itemView=f,c.prototype.initialize=function(){return this.collection=this.model.related.icons},c}(c.Marionette.CompositeView),h=function(a){function c(){return k=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="ul",c.prototype.className="container",c.prototype.itemView=g,c}(c.Marionette.CollectionView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/names_view",["underscore","backbone_all","utils/svg","utils/helpers"],function(a,c,d,e){var f,g,h,i,j,k;return f=function(a){function c(){return i=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="names_icon",c.prototype.tagName="li",c.prototype.ui={nameInput:"input"},c.prototype.events={"blur input":"updateNames","keypress input":"onKeyPress"},c.prototype.onKeyPress=function(a){return 13===a.keyCode?(this.updateNames(),a.target.blur()):void 0},c.prototype.updateNames=function(){var a,b;return b=e.slugify(this.ui.nameInput.val()),a=this.model.get("name"),b&&b!==a&&this.model.save({name:b}),this.ui.nameInput.val(b)},c}(c.Marionette.ItemView),g=function(a){function c(){return j=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="li",c.prototype.itemViewContainer=".icons",c.prototype.template="names_item",c.prototype.itemView=f,c.prototype.initialize=function(){return this.collection=this.model.related.icons},c}(c.Marionette.CompositeView),h=function(a){function c(){return k=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="ul",c.prototype.className="container",c.prototype.itemView=g,c}(c.Marionette.CollectionView)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("router",["backbone_all","views/not_found_view","views/font_layout","views/admin_libraries_view","views/libraries_view","views/customize_layout","views/account_view","views/download_view","views/libraries_management_view","views/library_preview_view","views/tags_view","views/names_view"],function(a,c,d,e,f,g,h,i,j,k,l,m){var n,o;return n=function(a){function n(){return o=n.__super__.constructor.apply(this,arguments)}return b(n,a),n.prototype.routes={"":"index","select/:uuid":"selectIcons","customize/:uuid":"customize","download/:uuid":"download",collections:"librariesManagement","collections/:uuid":"libraryPreview",account:"account",tags:"tags",names:"names","*other":"notFound"},n.prototype.initialize=function(a){return this.app=a.app},n.prototype.index=function(){var a;return a=this.app.fonts.getCurrent().get("uuid"),this.navigate("select/"+a,{trigger:!0})},n.prototype.selectIcons=function(a){var b,c=this;return this._getFontOrNull(a)?(b=this.app.bodyRegion.change("fontLayout",function(){return new d}),b.contentRegion.change("librariesView",function(){return c.app.user.isAdmin()?new e({collection:c.app.libraries}):new f({collection:c.app.libraries})},{transition:!0})):void 0},n.prototype.customize=function(a){var b;return this._getFontOrNull(a)?(b=this.app.bodyRegion.change("fontLayout",function(){return new d}),b.contentRegion.change("customizeLayout",function(){return new g},{addToCache:!1})):void 0},n.prototype.download=function(a){var b;return this._getFontOrNull(a)?(b=this.app.bodyRegion.change("fontLayout",function(){return new d}),b.contentRegion.change("downloadView",function(){return new i})):void 0},n.prototype.librariesManagement=function(){var a=this;return this.app.bodyRegion.change("librariesManagementView",function(){return new j({collection:a.app.allLibraries})},{addToCache:!1})},n.prototype.libraryPreview=function(a){var b;return b=this.app.premiumLibraries.findWhere({uuid:a}),b?this.app.bodyRegion.change("libraryPreviewView",function(){return new k({model:b})},{addToCache:!1}):this.notFound()},n.prototype.account=function(){return this.app.bodyRegion.change("accountView",function(){return new h})},n.prototype.tags=function(){var a,b=this;return a=function(){return new l({collection:b.app.libraries})},this.app.bodyRegion.change("tagsView",a,{addToCache:!1})},n.prototype.names=function(){var a,b=this;return a=function(){return new m({collection:b.app.libraries})},this.app.bodyRegion.change("namesView",a,{addToCache:!1})},n.prototype.notFound=function(){return this.app.bodyRegion.change("notFoundView",function(){return new c})},n.prototype._getFontOrNull=function(a){var b;return(b=this.app.fonts.findWhere({uuid:a}))?(b.isCurrent()||(b.markAsCurrent(),this.app.vent.trigger("currentFont:changed")),b):(this.notFound(),null)},n}(a.Router)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("models/user",["backbone_all"],function(a){var c,d;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url=function(){return"/api/v1/user/"},c.prototype.isAdmin=function(){return this.get("is_staff")},c}(a.Model)})}.call(this),function(){define("constants",[],function(){return{BASIC_LATIN_CHARS:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!\"#$%&'()*+,-./:;<=>?@[]^_`{|}~\\",GLYPHS_SYNC_DELAY:4e3}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("models/glyph",["backbone_all","constants"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.urlRoot="/api/v1/glyph/",d.prototype.defaults=function(){return{id:this.getNewID(),code:this.getFreeCode()}},d.prototype.toJSON=function(){var a;return a=d.__super__.toJSON.call(this),a.css=a.css_class,delete a.svg,delete a.css_class,a},d.prototype.parse=function(a){return a=d.__super__.parse.call(this,a),a.css_class=a.css,delete a.css,a},d.prototype.destroy=function(){return this.collection["delete"](this)},d.prototype.getNewID=function(){var a;return a=this.collection.pluck("id"),a.length?Math.max.apply(Math,this.collection.pluck("id"))+1:1},d.prototype.getCodeInputValue=function(){var a,b;if(a=this.get("code"),a>=33&&126>=a)return String.fromCharCode(a);for(b=a.toString(16).toUpperCase();b.length<4;)b="0"+b;return"U+"+b},d.prototype.changeCode=function(a){var b,c,d;return(c=this.parseInputCode(a))?(b=this.get("code"),d=0===this.collection.where({code:c}).length,c!==b&&d&&c>=32&&1114111>=c?(this.set({code:c}),this.collection.update({id:this.id,code:c}),"done"):d?"wrong input":"not unique"):void 0},d.prototype.changeClassName=function(a){return a=this.collection.getUniqueCSSClass(a),this.set({css_class:a}),this.collection.update({id:this.id,css:a})},d.prototype.getFreeCode=function(){var a;return(null!=(a=this.collection.related)?a.font.get("is_PUA"):void 0)?this.getFreePUACode():this.getFreeLatinCode()||this.getFreePUACode()},d.prototype.parseInputCode=function(a){return 1===a.length?a.charCodeAt(0):parseInt(a,16)},d.prototype.getFreePUACode=function(){var a;for(a=57344;;){if(0===this.collection.where({code:a}).length)return a;a+=1}},d.prototype.getFreeLatinCode=function(){var a,b,d,e,f;for(f=c.BASIC_LATIN_CHARS,d=0,e=f.length;e>d;d++)if(a=f[d],b=a.charCodeAt(0),0===this.collection.where({code:b}).length)return b},d.prototype.getSVG=function(a){var b,c,d,e,f;if(d=this.get("svg"),null!=d)return d;for(e=0,f=a.length;f>e;e++)if(c=a[e],b=c.related.icons.findWhere({uuid:this.get("icon")})){d=b.get("svg"),this.set({svg:d},{silent:!0});break}return d},d}(a.Tastypie.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("collections/glyphs",["underscore","jquery","backbone_all","constants","utils/helpers","models/glyph"],function(a,c,d,e,f,g){var h,i,j;return h=function(){function a(a){var b;this.latin_codes=[],this.current_code=57344,a||(this.latin_codes=function(){var a,c,d,f;for(d=e.BASIC_LATIN_CHARS,f=[],a=0,c=d.length;c>a;a++)b=d[a],f.push(b.charCodeAt(0));return f}())}return a.prototype.getNextCode=function(){var a;return this.latin_codes.length?this.latin_codes.shift():(a=this.current_code,this.current_code+=1,a)},a}(),i=function(a){function d(){return j=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.urlRoot="/api/sync/font/",d.prototype.model=g,d.prototype.initialize=function(){return this.syncActions=[],this.syncDeferred=c.Deferred(),this.syncDeferred.resolve()},d.prototype.create=function(a){var b;return b=this._prepareModel({icon:a.get("uuid"),css_class:this.getUniqueCSSClass(a.get("name"))}),this.add(b),this.addSyncAction({add:[b.toJSON()]})},d.prototype.update=function(a){return this.addSyncAction({update:[a]})},d.prototype["delete"]=function(a){var b;return b={"delete":[a.id]},this.remove(a),this.addSyncAction(b)},d.prototype.deleteByIcon=function(a){var b;return b=this.findWhere({icon:a.get("uuid")}),b?this["delete"](b):void 0},d.prototype.resetCodes=function(a){var b,c,d,e,f,g;for(null==a&&(a={}),c=new h(a.isPUA),g=this.models,e=0,f=g.length;f>e;e++)d=g[e],b=c.getNextCode(),d.set({code:b});return this.addSyncAction({full_update:this.toJSON()})},d.prototype.deleteAll=function(){return this.reset(),this.addSyncAction({delete_all:null})},d.prototype.addAndDelete=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(h=a.selectedIcons,c=a.deselectedIcons,b={add:[],"delete":[]},c.length){for(e=[],i=0,k=c.length;k>i;i++)f=c[i],d=this.findWhere({icon:f.get("uuid")}),b["delete"].push(d.id),e.push(d);this.remove(e)}if(h.length)for(j=0,l=h.length;l>j;j++)f=h[j],g=this._prepareModel({icon:f.get("uuid"),css_class:this.getUniqueCSSClass(f.get("name"))}),this.add(g),b.add.push(g.toJSON());return this.addSyncAction(b)},d.prototype.addSyncAction=function(a){var b=this;return null!=this.syncTimeout&&clearTimeout(this.syncTimeout),"pending"!==this.syncDeferred.state()&&(this.syncDeferred=c.Deferred()),this.syncActions.push(a),this.syncTimeout=f.after(e.GLYPHS_SYNC_DELAY,function(){return b._syncGlyphs()})},d.prototype._syncGlyphs=function(){var a,b,d,e=this;return a=this.syncActions,this.syncActions=[],b=this.related.font.get("uuid"),d=""+this.urlRoot+b+"/",c.ajax({data:JSON.stringify({actions:a}),url:d,type:"POST",dataType:"json",contentType:"application/json",success:function(){return e.syncActions.length?void 0:e.syncDeferred.resolve()}})},d.prototype.getUniqueCSSClass=function(a){var b,c;for(c=1,b=a;this.where({css_class:b}).length;)b=""+a+"-"+c,c+=1;return b},d}(d.Tastypie.Collection),d.Index(i),i})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b},c=[].slice;define("models/font",["backbone_all","collections/glyphs"],function(a,d){var e;return e=function(a){function e(){var a;a=1<=arguments.length?c.call(arguments,0):[],this.related={},this.related.glyphs=new d,this.related.glyphs.related={},this.related.glyphs.related.font=this,e.__super__.constructor.apply(this,a)}return b(e,a),e.prototype.urlRoot="/api/v1/font/",e.prototype.defaults=function(){return{full_name:this.getDefaultFontName(),is_current:!1,glyphs:[]}},e.prototype.toJSON=function(){var a;return a=e.__super__.toJSON.call(this),a.glyphs=[],a},e.prototype.fetchRelated=function(){return this.related.glyphs.url=""+this.related.glyphs.urlRoot+this.get("uuid")+"/",this.related.glyphs.fetch()},e.prototype.getDefaultFontName=function(){var a,b;for(b=1,a="Untitled font "+b;this.collection.where({full_name:a}).length;)b+=1,a="Untitled font "+b;return a},e.prototype.resetCodes=function(a){return this.save({is_PUA:a}),this.related.glyphs.resetCodes({isPUA:a,queue:!0})},e.prototype.isCurrent=function(){return this.get("is_current")},e.prototype.markAsCurrent=function(){var a;if(!this.isCurrent())return this.collection&&(a=this.collection.getCurrent(),a.save({is_current:!1},{silent:!0})),this.save({is_current:!0})},e}(a.Tastypie.Model)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("collections/fonts",["backbone_all","models/font"],function(b,d){var e,f;return e=function(b){function e(){return this.getCurrent=a(this.getCurrent,this),f=e.__super__.constructor.apply(this,arguments)}return c(e,b),e.prototype.urlRoot="/api/v1/font/",e.prototype.model=d,e.prototype.getCurrent=function(){var a;return a=this.where({is_current:!0})[0],a||(a=this.at(0),a.save({is_current:!0})),a},e}(b.Tastypie.Collection)})}.call(this),define("lawnchair",[],function(){var a=function(b,c){if(!(this instanceof a))return new a(b,c);if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2))throw"Incorrect # of ctor args!";c="function"==typeof arguments[0]?arguments[0]:arguments[1],b="function"==typeof arguments[0]?{}:arguments[0]||{},this.record=b.record||"record",this.name=b.name||"records";var d;if(b.adapter){"string"==typeof b.adapter&&(b.adapter=[b.adapter]);for(var e=0,f=b.adapter.length;f>e;e++){for(var g=a.adapters.length-1;g>=0&&(a.adapters[g].adapter!==b.adapter[e]||!(d=a.adapters[g].valid()?a.adapters[g]:void 0));g--);if(d)break}}else for(var g=0,h=a.adapters.length;h>g&&!(d=a.adapters[g].valid()?a.adapters[g]:void 0);g++);if(!d)throw"No valid adapter.";for(var e in d)this[e]=d[e];for(var g=0,h=a.plugins.length;h>g;g++)a.plugins[g].call(this);this.init(b,c)};return a.adapters=[],a.adapter=function(b,c){c.adapter=b;var d="adapter valid init keys save batch get exists all remove nuke".split(" "),e=this.prototype.indexOf;for(var f in c)if(-1===e(d,f))throw"Invalid adapter! Nonstandard method: "+f;a.adapters.splice(0,0,c)},a.plugins=[],a.plugin=function(b){for(var c in b)"init"===c?a.plugins.push(b[c]):this.prototype[c]=b[c]},a.prototype={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b,c,d){if(a.indexOf)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},lambda:function(a){return this.fn(this.record,a)},fn:function(a,b){return"string"==typeof b?new Function(a,b):b},uuid:function(){var a=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},each:function(a){var b=this.lambda(a);if(this.__results)for(var c=0,d=this.__results.length;d>c;c++)b.call(this,this.__results[c],c);else this.all(function(a){for(var c=0,d=a.length;d>c;c++)b.call(this,a[c],c)});return this}},a.adapter("indexed-db",function(){function a(){}var b=3,c=function(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB},d=function(){return window.IDBTransaction||window.webkitIDBTransaction||window.mozIDBTransaction||window.oIDBTransaction||window.msIDBTransaction},e=function(){return window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.oIDBKeyRange||window.msIDBKeyRange},f=function(){return window.IDBDatabaseException||window.webkitIDBDatabaseException||window.mozIDBDatabaseException||window.oIDBDatabaseException||window.msIDBDatabaseException},g=function(){return!!window.indexedDB},h=d()&&"READ_WRITE"in d()?d().READ_WRITE:"readwrite";return{valid:function(){return!!c()},init:function(d,e){this.idb=c(),this.waiting=[],this.useAutoIncrement=g();var h=this.idb.open(this.name,b),i=this,j=i.fn(i.name,e);if(j&&"function"!=typeof j)throw"callback not valid";var k=function(){return h.onupgradeneeded=h.onsuccess=null,j?j.call(i,i):void 0},l=function(){try{i.db.deleteObjectStore("teststore")}catch(a){}try{i.db.deleteObjectStore(i.record)}catch(b){}var c={};i.useAutoIncrement&&(c.autoIncrement=!0),i.db.createObjectStore(i.record,c),i.store=!0};h.onupgradeneeded=function(a){i.db=h.result,i.transaction=h.transaction,l(a.oldVersion,a.newVersion)},h.onsuccess=function(c){if(i.db=c.target.result,i.db.version!=""+b){var d=i.db.version,e=i.db.setVersion(""+b);e.onsuccess=function(){var a=e.result;e.onsuccess=e.onerror=null,l(d,b),a.oncomplete=function(){for(var a=0;a<i.waiting.length;a++)i.waiting[a].call(i);i.waiting=[],k()}},e.onerror=function(b){e.onsuccess=e.onerror=null,a(b)}}else{i.store=!0;for(var f=0;f<i.waiting.length;f++)i.waiting[f].call(i);i.waiting=[],k()}},h.onerror=function(){return h.errorCode===f().VERSION_ERR?(i.idb.deleteDatabase(i.name),i.init(d,e)):void 0}},save:function(b,c){var d=this;if(!this.store)return this.waiting.push(function(){this.save(b,c)}),void 0;for(var e=(this.isArray(b)?b:[b]).map(function(a){return a.key||(a.key=d.uuid()),a}),f=function(){c&&d.lambda(c).call(d,d.isArray(b)?e:e[0])
},g=this.db.transaction(this.record,h),i=g.objectStore(this.record),j=0;j<e.length;j++){var k=e[j];i.put(k,k.key)}return i.transaction.oncomplete=f,i.transaction.onabort=a,this},batch:function(a,b){return this.save(a,b)},get:function(b,c){if(!this.store)return this.waiting.push(function(){this.get(b,c)}),void 0;var d=this,e=function(a){var e=a.target.result;c&&(e&&(e.key=b),d.lambda(c).call(d,e))};if(this.isArray(b))for(var f=[],g=b.length,h=b,i=function(a){d.get(h[a],function(b){f[a]=b,--g>0||c&&d.lambda(c).call(d,f)})},j=0,k=h.length;k>j;j++)i(j);else{var l=this.db.transaction(this.record).objectStore(this.record).get(b);l.onsuccess=function(a){l.onsuccess=l.onerror=null,e(a)},l.onerror=function(b){l.onsuccess=l.onerror=null,a(b)}}return this},exists:function(b,c){if(!this.store)return this.waiting.push(function(){this.exists(b,c)}),void 0;var d=this,f=this.db.transaction(d.record).objectStore(this.record).openCursor(e().only(b));return f.onsuccess=function(a){f.onsuccess=f.onerror=null;var b;d.lambda(c).call(d,null!==a.target.result&&a.target.result!==b)},f.onerror=function(b){f.onsuccess=f.onerror=null,a(b)},this},all:function(a){if(!this.store)return this.waiting.push(function(){this.all(a)}),void 0;var b=this.fn(this.name,a)||void 0,c=this,d=this.db.transaction(this.record).objectStore(this.record),e=[];return d.openCursor().onsuccess=function(a){var d=a.target.result;d?(e.push(d.value),d["continue"]()):b&&b.call(c,e)},this},keys:function(a){if(!this.store)return this.waiting.push(function(){this.keys(a)}),void 0;var b=this.fn(this.name,a)||void 0,c=this,d=this.db.transaction(this.record).objectStore(this.record),e=[];return d.openCursor().onsuccess=function(a){var d=a.target.result;d?(e.push(d.key),d["continue"]()):b&&b.call(c,e)},this},remove:function(b,c){if(!this.store)return this.waiting.push(function(){this.remove(b,c)}),void 0;var d=this,e=b;this.isArray(b)||(e=[b]);for(var f=function(){c&&d.lambda(c).call(d)},g=this.db.transaction(this.record,h).objectStore(this.record),i=b.key?b.key:b,j=0;j<e.length;j++){var i=e[j].key?e[j].key:e[j];g["delete"](i)}return g.transaction.oncomplete=f,g.transaction.onabort=a,this},nuke:function(b){if(!this.store)return this.waiting.push(function(){this.nuke(b)}),void 0;var c=this,d=b?function(){c.lambda(b).call(c)}:function(){};try{var e=this.db.transaction(this.record,h).objectStore(this.record);e.clear(),e.transaction.oncomplete=d,e.transaction.onabort=a}catch(f){"NotFoundError"==f.name?d():a(f)}return this}}}()),a.adapter("webkit-sqlite",function(){var a=function(){},b=function(){return new Date};return Function.prototype.bind||(Function.prototype.bind=function(a){var b=[].slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e?this:a||{},c.concat(b.call(arguments)))};return e.prototype=d.prototype,f.prototype=new e,f}),{valid:function(){return!!window.openDatabase},init:function(b,c){var d=this,e=d.fn(d.name,c),f="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",g=function(){return e?e.call(d,d):void 0};if(e&&"function"!=typeof e)throw"callback not valid";this.db=openDatabase(this.name,"1.0.0",this.name,52428800),this.db.transaction(function(a){a.executeSql(f,[])},a,g)},keys:function(b){var c=this.lambda(b),d=this,e="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.readTransaction(function(b){var f=function(a,b){if(0==b.rows.length)c.call(d,[]);else{for(var e=[],f=0,g=b.rows.length;g>f;f++)e.push(b.rows.item(f).id);c.call(d,e)}};b.executeSql(e,[],f,a)}),this},save:function(c,d,e){var f=this,g=(this.isArray(c)?c:[c]).map(function(a){return a.key||(a.key=f.uuid()),a}),h="INSERT OR REPLACE INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",i=function(){d&&f.lambda(d).call(f,f.isArray(c)?g:g[0])},j=[],k=b();try{for(var l=0,m=g.length;m>l;l++)j[l]=[JSON.stringify(g[l]),k,g[l].key]}catch(n){throw a(n),n}return f.db.transaction(function(a){for(var b=0,c=g.length;c>b;b++)a.executeSql(h,j[b])},function(b,c){a(b,c)},i),this},batch:function(a,b){return this.save(a,b)},get:function(b,c){var d=this,e="",f=this.isArray(b)?b:[b];e="SELECT id, value FROM "+this.record+" WHERE id IN ("+f.map(function(){return"?"}).join(",")+")";var g=function(a,e){for(var g,h,i={},j=0,k=e.rows.length;k>j;j++)g=JSON.parse(e.rows.item(j).value),g.key=e.rows.item(j).id,i[g.key]=g;h=f.map(function(a){return i[a]}),d.isArray(b)||(h=h.length?h[0]:null),c&&d.lambda(c).call(d,h)};return this.db.readTransaction(function(b){b.executeSql(e,f,g,a)}),this},exists:function(b,c){var d="SELECT * FROM "+this.record+" WHERE id = ?",e=this,f=function(a,b){c&&e.fn("exists",c).call(e,b.rows.length>0)};return this.db.readTransaction(function(c){c.executeSql(d,[b],f,a)}),this},all:function(b){var c=this,d="SELECT * FROM "+this.record,e=[],f=this.fn(this.name,b)||void 0,g=function(a,b){if(0!=b.rows.length)for(var d=0,g=b.rows.length;g>d;d++){var h=JSON.parse(b.rows.item(d).value);h.key=b.rows.item(d).id,e.push(h)}f&&f.call(c,e)};return this.db.readTransaction(function(b){b.executeSql(d,[],g,a)}),this},remove:function(b,c){var d,e=this,f="DELETE FROM "+this.record+" WHERE id ",g=function(){c&&e.lambda(c).call(e)};return this.isArray(b)?(d=b,f+="IN ("+d.map(function(){return"?"}).join(",")+")"):(f+="= ?",d=[b]),d=d.map(function(a){return a.key?a.key:a}),this.db.transaction(function(b){b.executeSql(f,d,g,a)}),this},nuke:function(b){var c="DELETE FROM "+this.record,d=this,e=b?function(){d.lambda(b).call(d)}:function(){};return this.db.transaction(function(b){b.executeSql(c,[],e,a)}),this}}}()),a}),function(){define("utils/cache",["jquery","lawnchair"],function(a,b){var c,d,e,f;return c="cache",d=["indexed-db","webkit-sqlite"],e={},f=function(a,b,c){return a.nuke(function(){return a.save({key:"version",version:b},c)})},{getStore:function(g,h){var i,j,k;if(e[g])return e[g];k=a.Deferred(),e[g]=k,j=a.Deferred();try{new b({name:c,record:g,adapter:d},function(a){return j.resolve(a)})}catch(l){i=l,j.reject(i)}return j.done(function(a){return null==h?(k.resolve(a),void 0):a.exists("version",function(b){return b?a.get("version",function(b){return b.version===h?k.resolve(a):f(a,h,function(){return k.resolve(a)})}):f(a,h,function(){return k.resolve(a)})})}),j.fail(function(a){return k.reject(a)}),k.promise()}}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("models/icon",["backbone_all"],function(a){var c,d,e;return d=function(a){return'<svg width="512" height="512" viewBox="0 0 512 512"><path d="'+a+'"></path></svg>'},c=function(a){function c(){return e=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.urlRoot="/api/v1/icon/",c.prototype.toJSON=function(){var a;return a=c.__super__.toJSON.call(this),a.tags&&(a.tags=a.tags.join(",")),a},c.prototype.isSelectedFor=function(a){var b;return b=this.get("uuid"),b?a.related.glyphs.where({icon:b}).length:!1},c.prototype.parse=function(a){return a=c.__super__.parse.call(this,a),a.tags=a.tags.split(","),a.svg=d(a.svg),a},c}(a.Tastypie.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("collections/icons",["backbone_all","models/icon"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.urlRoot="/api/v1/icon/",d.prototype.model=c,d.prototype.comparator=function(a,b){var c,d,e,f,g,h,i;for(c=a.get("name"),e=b.get("name"),d=c.split(/(\d+)/),f=e.split(/(\d+)/),i=0;i<Math.max(d.length,f.length);){if(d[i]!==f[i])return g=isNaN(parseInt(d[i],10))?d[i]:parseInt(d[i],10),h=isNaN(parseInt(f[i],10))?f[i]:parseInt(f[i],10),void 0===g||void 0===h?d.length-f.length:h>g?-1:1;i++}return 0},d}(a.Tastypie.Collection)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b},c=[].slice;define("models/library",["jquery","underscore","backbone_all","utils/helpers","utils/cache","collections/icons"],function(a,d,e,f,g,h){var i,j;return i={personal:0,"public":1,premium:2},j=function(e){function j(){var a;a=1<=arguments.length?c.call(arguments,0):[],this.related={icons:new h},j.__super__.constructor.apply(this,a)}return b(j,e),j.prototype.urlRoot="/api/v1/library/",j.prototype._relatedFetched=!1,j.prototype.defaults={name:"New collection",icon_groups:[],type:i.personal},j.prototype.toJSON=function(){var a;return a=j.__super__.toJSON.call(this),a.icon_groups=[],a},j.prototype.fetchRelated=function(){var b,c,e,f,h,i;return this._relatedFetched=!0,0===this.get("icon_counter")?!0:(h=this.get("id")+"",c=a.Deferred(),this.related.icons.filters.library=h,e=this.related.icons,f=this.get("icons_updated_at"),b=1,i=g.getStore("libraries",b),i.done(function(a){return a.exists(h,function(b){return b?a.get(h,function(b){return b.iconsUpdatedAt===f?(e.add(b.icons),c.resolve()):a.remove(h,function(){return e.fetch().done(function(){var b;return c.resolve(),a.save({key:h,icons:function(){var a,c,f,g;for(f=e.models,g=[],a=0,c=f.length;c>a;a++)b=f[a],g.push(d.clone(b.attributes));return g}(),iconsUpdatedAt:f})})})}):e.fetch().done(function(){var b;return c.resolve(),a.save({key:h,icons:function(){var a,c,f,g;for(f=e.models,g=[],a=0,c=f.length;c>a;a++)b=f[a],g.push(d.clone(b.attributes));return g}(),iconsUpdatedAt:f})})})}),i.fail(function(){return e.fetch().done(function(){return c.resolve()})}),c.promise())},j.prototype.relatedFetched=function(){return this.related.icons.length||this._relatedFetched},j.prototype.isPremium=function(){return this.get("type")===i.premium},j.prototype.isPersonal=function(){return this.get("type")===i.personal},j.prototype.isTrial=function(){return Boolean(this.get("trial"))},j.prototype.iconsCounter=function(){return this.get("is_hidden")?this.get("icon_counter"):this.related.icons.length},j.prototype.initCountdown=function(a,b,c){var d,e=this;return null==b&&(b=60),d=f.every(1e3*(c||b),function(){var c,f;return f=e.get(a)-b,0>=f&&(f=0,clearInterval(d),e.trigger("expire:"+a)),c={},c[""+a]=f,e.set(c)})},j}(e.Tastypie.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("collections/libraries",["backbone_all","models/library"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.urlRoot="/api/v1/library/",d.prototype.model=c,d.prototype.comparator=function(a){var b;return a.isPremium()?-a.get("id")-1e6:(b=a.get("position"),b||-a.get("id"))},d.prototype.getSelectedIconsFor=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(e=a.related.glyphs.pluck("icon"),f=[],e.length)for(m=this.models,g=0,j=m.length;j>g;g++)for(d=m[g],h=0,k=e.length;k>h;h++)for(c=e[h],n=d.related.icons.where({uuid:c}),i=0,l=n.length;l>i;i++)b=n[i],f.push(b);return f},d}(a.Tastypie.Collection)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b},c=[].slice;define("models/premium_library",["backbone_all","utils/helpers"],function(a,d){var e;return e=function(a){function e(){var a;a=1<=arguments.length?c.call(arguments,0):[],e.__super__.constructor.apply(this,a),this.get("discount_expires_in")&&this.initCountdown("discount_expires_in")}return b(e,a),e.prototype.urlRoot="/api/v1/premiumlibrary/",e.prototype.isPremiumLibrary=function(){return!0},e.prototype.isPremium=function(){return!0},e.prototype.initCountdown=function(a,b,c){var e,f=this;return null==b&&(b=60),e=d.every(1e3*(c||b),function(){var c,d;return d=f.get(a)-b,0>=d&&(d=0,clearInterval(e),f.trigger("expire:"+a)),c={},c[""+a]=d,f.set(c)})},e.prototype.getDiscountPrice=function(){var a,b;return a=this.get("discount_percent"),a?(b=this.get("price"),Math.round(b-b*a/100)):void 0},e}(a.Tastypie.Model)})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("collections/premium_libraries",["backbone_all","models/premium_library"],function(a,c){var d,e;return d=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.urlRoot="/api/v1/premiumlibrary/",d.prototype.model=c,d}(a.Tastypie.Collection)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("views/topbar_view",["backbone_all","app","utils/upload_icons"],function(b,d,e){var f,g;return f=function(f){function h(){return this.triggerFileInput=a(this.triggerFileInput,this),g=h.__super__.constructor.apply(this,arguments)}return c(h,f),h.prototype.template="topbar",h.prototype.events={"change .import-icons-input":e,"click .new-font":"createNewFont","click .import-icons":"triggerFileInput"},h.prototype.initialize=function(){return this.model=d.user},h.prototype.serializeData=function(){var a,b;return a=h.__super__.serializeData.call(this),b=d.premiumLibraries.findWhere({name__icontains:"minicons"}),b&&(a.premiumLibrary=b.toJSON()),a},h.prototype.createNewFont=function(a){var b;return a.preventDefault(),b=d.fonts.create({},{wait:!0}).once("sync",function(){return b.markAsCurrent(),d.vent.trigger("currentFont:changed"),d.router.index()})},h.prototype.triggerFileInput=function(a){var c,e;return a.preventDefault(),c=d.fonts.getCurrent().get("uuid"),"collections"!==(e=b.history.fragment)&&e!=="select/"+c&&d.router.navigate("/",{trigger:!0}),this.$el.find(".import-icons-input").trigger("click")},h}(b.Marionette.ItemView)})}.call(this),function(){define("utils/csrf",["jquery"],function(a){return{getCookie:function(b){var c,d,e,f,g,h;if(e=null,document.cookie)for(h=document.cookie.split(";"),f=0,g=h.length;g>f;f++)if(c=h[f],c=a.trim(c),d=c.split("=",1)[0],d===b){e=decodeURIComponent(c.substring(b.length+1));break}return e},safeMethod:function(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)},sameOrigin:function(a){var b,c,d,e;return b=document.location.host,d=document.location.protocol,e="//"+b,c=d+e,a===c||a.slice(0,c.length+1)===c+"/"||a===e||a.slice(0,e.length+1)===e+"/"||!/^(\/\/|http:|https:).*/.test(a)}}})}.call(this),function(){require(["jquery","utils/csrf"],function(a,b){return a.xhrPool=[],a.xhrPool.abortAll=function(){var b,c,d,e;for(a.xhrPool.isAbortMode=!0,e=a.xhrPool,c=0,d=e.length;d>c;c++)b=e[c],b.abort();return a.xhrPool.isAbortMode=!1,a.xhrPool.length=0},a.ajaxSetup({beforeSend:function(c,d){return!b.safeMethod(d.type)&&b.sameOrigin(d.url)&&c.setRequestHeader("X-CSRFToken",b.getCookie("csrftoken")),a.xhrPool.push(c)},complete:function(b){var c;return!a.xhrPool.isAbortMode&&(c=a.xhrPool.indexOf(b),c>-1)?a.xhrPool.splice(c,1):void 0},statusCode:{401:function(){return window.location.href="/accounts/login/"},503:function(){return window.location.href="/app/"}}})})}.call(this),define("init/ajax_settings",function(){}),!function(a){a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),define("bootstrap/transition",function(){}),!function(a){function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(){var d,e,f=a(this);if(!f.is(".disabled, :disabled"))return d=c(f),e=d.hasClass("open"),b(),e||d.toggleClass("open"),f.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),define("bootstrap/dropdown",function(){}),!function(a){var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault(),b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),define("bootstrap/modal",function(){}),!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),define("bootstrap/tooltip",function(){}),function(a){a.fn.selectText=function(){var a,b,c=this[0];document.body.createTextRange?(a=document.body.createTextRange(),a.moveToElementText(c),a.select()):window.getSelection&&(b=window.getSelection(),a=document.createRange(),a.selectNodeContents(c),b.removeAllRanges(),b.addRange(a))}}(window.jQuery),define("libs/select_text",function(){}),function(a){"function"==typeof define&&define.amd?define("libs/xselectable",["jquery"],a):a(jQuery)}(function(a){var b="xselectable",c={distance:0,disabled:!1,cancel:":input,option",filter:"*",scrollingThreshold:100,scrollSpeedMultiplier:1,scroller:null,positioner:null},d=function(c){function d(){return document.documentElement}function f(){var a="number"==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop,b="number"==typeof window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft;return[a,b+k,a+l,b]}function g(){var a="number"==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop,b="number"==typeof window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft;return[Math.max(a-j.top,0),Math.max(j.left+j.width-b-k,0),Math.max(j.top+j.height-a-l,0),Math.max(b-j.left,0)]}function h(a,b){"vertical"==a?window.scrollBy(0,b):window.scrollBy(b,0)}function i(){return{top:0,left:0}}var j=a(c).data(b).containerDimensions,k="number"==typeof window.innerWidth?window.innerWidth:document.documentElement.clientWidth,l="number"==typeof window.innerHeight?window.innerHeight:document.documentElement.clientHeight;return document.documentElement.scrollWidth,document.documentElement.scrollHeight,{getScrollableElement:d,getScrollBorders:f,getScrollableDistances:g,scroll:h,getScrollOffset:i,next:e(c)}},e=function(c){function d(){return[c.scrollTop,c.scrollWidth-c.scrollLeft-g.width,c.scrollHeight-c.scrollTop-g.height,c.scrollLeft]}function e(a,b){var d="vertical"==a?"scrollTop":"scrollLeft";c[d]+=b}function f(){return{top:0,left:0}}var g=a(c).data(b).containerDimensions;return{getScrollableDistances:d,scroll:e,getScrollOffset:f}},f=function(){return this},g=function(){var c=a(this).data(b).containerDimensions;return[c.top,c.left+c.width,c.top+c.height,c.left]},h=function(a){return{top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}},i=function(a){return a>0?1:0>a?-1:0},j=function(){var c=a(this),d=c.data(b);d.selectionGlass=a("<div />",{"class":b+"-glass"}).css({position:"absolute",top:0,left:0,height:this.scrollHeight,width:this.scrollWidth,overflow:"hidden"}).appendTo(c),d.selectionBox=a("<div />",{"class":b+"-box"}).css({position:"absolute"}).appendTo(d.selectionGlass)},k=function(){var c=this,d=a(this),e=d.data(b),f=[];d.find(e.options.filter).each(function(){var a=(e.options.positioner||h).call(c,this);a.element=this,a.selected=!1,f.push(a)}),e.selectables=f},l=function(c){var d=a(this).data(b);d.selectionBoxExtents={top:Math.min(d.startPosition.pageY,c.pageY)-d.containerDimensions.top+this.scrollTop,left:Math.min(d.startPosition.pageX,c.pageX)-d.containerDimensions.left+this.scrollLeft,height:Math.abs(d.startPosition.pageY-c.pageY),width:Math.abs(d.startPosition.pageX-c.pageX)},d.selectionBox.css(d.selectionBoxExtents)},m=function(c,d,e){var h=a(this),j=h.data(b),k=(j.containerDimensions,j.options.scrollingThreshold),l=j.options.scrollSpeedMultiplier;j.scrollingTimeout&&(window.clearTimeout(j.scrollingTimeout),delete j.scrollingTimeout);for(var n=e?((new Date).getTime()-e)/16:1,o=e,p=!1,q=d.getScrollableDistances(),s=d.getScrollBorders?d.getScrollBorders():g.call(this),t=d.getScrollableElement?d.getScrollableElement():f.call(this),u=[{distance:Math.max(c.pageY-s[0],0),direction:-1,scrollAxis:"vertical",positionProperty:"pageY"},{distance:Math.max(s[1]-c.pageX,0),direction:1,scrollAxis:"horizontal",positionProperty:"pageX"},{distance:Math.max(s[2]-c.pageY,0),direction:1,scrollAxis:"vertical",positionProperty:"pageY"},{distance:Math.max(c.pageX-s[3],0),direction:-1,scrollAxis:"horizontal",positionProperty:"pageX"}],v=u.length-1;v>=0;v--){var w=u[v],x=q[v];if(w.distance<k&&x>0&&i(j.curPosition[w.positionProperty]-j.lastPosition[w.positionProperty])==w.direction){var y=w.direction*Math.round(Math.min(x,Math.ceil((k-w.distance)/10)*n*l));d.scroll(w.scrollAxis,y),t==this?(j.startPosition[w.positionProperty]-=y,j.curPosition[w.positionProperty]-=y):c[w.positionProperty]+=y,p=!0}}p?j.scrollingTimeout=window.setTimeout(a.proxy(function(){r.call(this,c,o)},this),16):d.next&&m.call(this,c,d.next,e)},n=function(c){for(var d=a(this),e=d.data(b),f={top:0,left:0},g=c;g;){var h=g.getScrollOffset();f.top+=h.top,f.left+=h.left,g=g.next}for(var i=e.selectables.length-1;i>=0;i--){var j=e.selectables[i];o(e.selectionBoxExtents,j,f)?j.selected||(j.selected=!0,d.trigger(b+"selecting",{selecting:j.element})):j.selected&&(j.selected=!1,d.trigger(b+"unselecting",{unselecting:j.element}))}},o=function(a,b,c){return p(a.top,a.height,b.top+c.top,b.height)&&p(a.left,a.width,b.left+c.left,b.width)},p=function(a,b,c,d){var e=a+b,f=c+d;return c>=a&&e>=c||f>=a&&e>=f||a>=c&&f>=e},q=function(c){var e=a(this),f=e.data(b);if(1==c.which){var g=[f.options.cancel,f.options.cancel+" *"].join(",");f.options.cancel&&a(c.target).is(g)||c.pageX>e.offset().left+this.clientWidth||c.pageY>e.offset().top+this.clientHeight||(f.containerDimensions={top:e.offset().top+(e.outerHeight(!1)-e.innerHeight())/2,left:e.offset().left+(e.outerWidth(!1)-e.innerWidth())/2,width:this.clientWidth,height:this.clientHeight},f.startPosition={pageX:c.pageX,pageY:c.pageY},f.curPosition={pageX:c.pageX,pageY:c.pageY},f.scroller=(f.options.scroller||d).call(this,this),f.mouseupHandler=a.proxy(s,this),a(document).bind("mouseup."+b,f.mouseupHandler),a(document).bind("mousemove."+b,a.proxy(r,this)),e.bind("mousewheel."+b,function(a){return a.preventDefault(),!1
}),c.preventDefault())}},r=function(c,d){var e=a(this),f=e.data(b),g=f.scroller,h=f.options.distance;!f.selectionBox&&Math.abs(f.startPosition.pageX-c.pageX)<h&&Math.abs(f.startPosition.pageY-c.pageY)<h||(f.lastPosition=f.curPosition,f.curPosition={pageX:c.pageX,pageY:c.pageY},f.selectionBox||(e.trigger(b+"start"),j.apply(this),k.apply(this)),m.call(this,c,g,d),l.call(this,c),n.call(this,g))},s=function(){var c=a(this),d=c.data(b);if(d.scrollingTimeout&&(window.clearTimeout(d.scrollingTimeout),delete d.scrollingTimeout),c.unbind("mousewheel."+b),a(document).unbind("mousemove."+b),a(document).unbind("mouseup."+b,d.mouseupHandler),d.mouseupHandler=void 0,d.selectionBox){d.selectionBox.remove(),delete d.selectionBox,d.selectionGlass.remove(),delete d.selectionGlass;for(var e=[],f=[],g=d.selectables.length-1;g>=0;g--)(d.selectables[g].selected?e:f).push(d.selectables[g].element);delete d.selectables,c.trigger(b+"selected",{selected:e}),c.trigger(b+"unselected",{unselected:f}),c.trigger(b+"stop")}},t={init:function(d){return this.each(function(){a(this).data(b,{options:a.extend({},c,d)})}),this.data(b).options.disabled?this:t.enable.apply(this)},destroy:function(){return t.disable.apply(this),this.removeData(b)},enable:function(){return this.each(function(){var c=a(this),d=c.data(b);d.options.disabled=!1,c.bind("mousedown."+b,q)})},disable:function(){return this.each(function(){var c=a(this),d=c.data(b);d.options.disabled=!0,c.unbind("."+b)})},option:function(a,c){var d=this.first().data(b).options;return void 0===c?d[a]:(d[a]=c,"disabled"==a&&(c?t.disable.apply(this):t.enable.apply(this)),this)}};a.fn[b]=function(c){return t[c]?t[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery."+b),void 0):t.init.apply(this,arguments)}}),define("libs/filedownload",["jquery"],function(a){var b=/[<>&\r\n"']/gm,c={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};a.extend({fileDownload:function(d,e){function f(){if(-1!=document.cookie.indexOf(m.cookieName+"="+m.cookieValue))return r.onSuccess(d),document.cookie=m.cookieName+"=; expires="+new Date(1e3).toUTCString()+"; path="+m.cookiePath,h(!1),void 0;if(t||s)try{var b=t?t.document:g(s);if(b&&null!=b.body&&b.body.innerHTML.length){var c=!0;if(v&&v.length){var e=a(b.body).contents().first();e.length&&e[0]===v[0]&&(c=!1)}if(c)return r.onFail(b.body.innerHTML,d),h(!0),void 0}}catch(i){return r.onFail("",d),h(!0),void 0}setTimeout(f,m.checkInterval)}function g(a){var b=a[0].contentWindow||a[0].contentDocument;return b.document&&(b=b.document),b}function h(a){setTimeout(function(){t&&(k&&t.close(),j&&(t.focus(),a&&t.close()))},0)}function i(a){return a.replace(b,function(a){return"&"+c[a]})}var j,k,l,m=a.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},prepareCallback:function(){},successCallback:function(){},failCallback:function(){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},e),n=new a.Deferred,o=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();/ip(ad|hone|od)/.test(o)?j=!0:-1!==o.indexOf("android")?k=!0:l=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(o.substr(0,4));var p=m.httpMethod.toUpperCase();if(k&&"GET"!==p)return a().dialog?a("<div>").html(m.androidPostUnsupportedMessageHtml).dialog(m.dialogOptions):alert(m.androidPostUnsupportedMessageHtml),n.reject();var q=null,r={onPrepare:function(b){m.preparingMessageHtml?q=a("<div>").html(m.preparingMessageHtml).dialog(m.dialogOptions):m.prepareCallback&&m.prepareCallback(b)},onSuccess:function(a){q&&q.dialog("close"),m.successCallback(a),n.resolve(a)},onFail:function(b,c){q&&q.dialog("close"),m.failMessageHtml&&a("<div>").html(m.failMessageHtml).dialog(m.dialogOptions),m.failCallback(b,c),n.reject(b,c)}};r.onPrepare(d),null!==m.data&&"string"!=typeof m.data&&(m.data=a.param(m.data));var s,t,u,v;if("GET"===p){if(null!==m.data){var w=d.indexOf("?");-1!==w?"&"!==d.substring(d.length-1)&&(d+="&"):d+="?",d+=m.data}j||k?(t=window.open(d),t.document.title=m.popupWindowTitle,window.focus()):l?window.location(d):s=a("<iframe>").hide().prop("src",d).appendTo("body")}else{var x="";null!==m.data&&a.each(m.data.replace(/\+/g," ").split("&"),function(){var a=this.split("="),b=m.encodeHTMLEntities?i(decodeURIComponent(a[0])):decodeURIComponent(a[0]);if(b){var c=m.encodeHTMLEntities?i(decodeURIComponent(a[1])):decodeURIComponent(a[1]);x+='<input type="hidden" name="'+b+'" value="'+c+'" />'}}),l?(v=a("<form>").appendTo("body"),v.hide().prop("method",m.httpMethod).prop("action",d).html(x)):(j?(t=window.open("about:blank"),t.document.title=m.popupWindowTitle,u=t.document,window.focus()):(s=a("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),u=g(s)),u.write("<html><head></head><body><form method='"+m.httpMethod+"' action='"+d+"'>"+x+"</form>"+m.popupWindowTitle+"</body></html>"),v=a(u).find("form")),v.submit()}return setTimeout(f,m.checkInterval),n.promise()}})}),function(){require(["jquery","bootstrap/transition","bootstrap/dropdown","bootstrap/modal","bootstrap/tooltip","libs/select_text","libs/xselectable","libs/filedownload"],function(a){return a(window).scroll(function(){var b;return b=a(".navbar"),b.length&&"none"!==b.parent().css("display")?a(this).scrollTop()>122?(b.addClass("fixed"),a(".content").css({"padding-top":"107px"})):(b.removeClass("fixed"),a(".content").css({"padding-top":"0"})):void 0}),a(document).tooltip({selector:"a[title], span[title]"})})}.call(this),define("init/jquery_pluggins",function(){}),function(){require(["jquery","backbone_all","app","router","models/user","collections/fonts","collections/libraries","collections/premium_libraries","views/topbar_view","init/ajax_settings","init/jquery_pluggins"],function(a,b,c,d,e,f,g,h,i){var j,k;return j=function(){var b;return b=window.location.hash,a("a").removeClass("active"),a("a[href='"+b+"']").addClass("active"),a("*[data-active-on]").removeClass("active"),a("*[data-active-on='"+b+"']").addClass("active")},k=function(){return a("body").scrollTop(0)},c.router=new d({app:c}),c.router.on("route",function(){return 0}),c.router.on("route",j),c.router.on("route",k),c.addInitializer(function(){var d;return c.user=new e,c.fonts=new f,c.libraries=new g,c.allLibraries=new g,c.premiumLibraries=new h,d=function(a){var b,d,e,f;return d=a.get("id"),e=c.premiumLibraries.findWhere({id:d}),e&&(c.allLibraries.remove(a),f=e.get("trial_expires_in"),b=e.get("discount_expires_in"),f&&(a.set({trial_expires_in:f,trial:!0}),a.initCountdown("trial_expires_in"),a.once("expire:trial_expires_in",function(){return this.collection.remove(this)})),b)?(a.set({discount_percent:e.get("discount_percent")}),a.set({discount_expires_in:b}),a.initCountdown("discount_expires_in")):void 0},a.when(c.user.fetch(),c.fonts.fetch(),c.allLibraries.fetch(),c.premiumLibraries.fetch()).done(function(){var e,f,g,h,j,k,l,m,n,o,p,q,r;for(h=[],p=c.allLibraries.where({is_hidden:!1}),j=0,m=p.length;m>j;j++)f=p[j],f.collection=c.libraries,c.libraries.add(f),h.push(f.fetchRelated()),d(f);for(q=c.premiumLibraries.models,k=0,n=q.length;n>k;k++)g=q[k],c.allLibraries.add(g);for(r=c.fonts.models,l=0,o=r.length;o>l;l++)e=r[l],h.push(e.fetchRelated());return a.when.apply(a,h).done(function(){var d;return d=!0,c.fonts.isEmpty()&&(d=c.fonts.create({is_current:!0}).saveDeferred),a.when(d).done(function(){return window.progressLogo.stop(),c.topbarRegion.show(new i),b.history.start()})})})}),c.start()})}.call(this),define("main",function(){})}();